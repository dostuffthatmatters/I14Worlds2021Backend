(this.webpackJsonpreact_frontend=this.webpackJsonpreact_frontend||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){e.exports=a.p+"media/EventLogo.f96c867d.svg"},146:function(e,t,a){e.exports=a.p+"media/I14IconSquare.59a50445.svg"},150:function(e,t,a){e.exports=a.p+"media/vr_sport_logo.46215b96.svg"},154:function(e,t,a){e.exports=a.p+"media/_DSC9541_Landscape.51145d14.jpg"},155:function(e,t,a){e.exports=a.p+"media/_DSC9541_Square.2762e938.jpg"},156:function(e,t,a){e.exports=a.p+"media/_DSC9541_Portrait.f9058518.jpg"},157:function(e,t,a){e.exports=a.p+"media/EventLogo.70c2e8d3.svg"},158:function(e,t,a){e.exports=a.p+"media/FSCLogo.8aab3e47.svg"},159:function(e,t,a){e.exports=a.p+"media/VRSportTVLogo.5827dc79.svg"},160:function(e,t,a){e.exports=a.p+"media/_DSC9072_2800px_cut.46be21e5.jpg"},161:function(e,t,a){e.exports=a.p+"media/_DSC9718_3200px_cut.17f8cf99.jpg"},166:function(e,t,a){e.exports=a.p+"media/AUSFlag.00cddc0c.png"},167:function(e,t,a){e.exports=a.p+"media/CANFlag.50f3c85d.svg"},168:function(e,t,a){e.exports=a.p+"media/JPNFlag.bc44cdcb.svg"},169:function(e,t,a){e.exports=a.p+"media/USAFlag.662539e7.svg"},170:function(e,t,a){e.exports=a.p+"media/EURFlag.c31a7d3c.svg"},185:function(e,t,a){e.exports=a(229)},190:function(e,t,a){},191:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(16),s=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(190);var l=a(171),o=a(276),c=a(19),m=a.n(c),d=a(9),p=a(10),g=a(12),u=a(11),h=a(6),b=a(13),f=a(35),v=a.n(f);function E(e,t){return new Promise((function(a,n){var i;if(window.XMLHttpRequest){(i=new XMLHttpRequest).onreadystatechange=function(){4===this.readyState&&(200===this.status?a(this.responseText):n("\nAJAX Request Rejected: "+this.responseText))};var r="?";for(var s in t)"string"!==typeof t[s]?(r+=s+"=",t[s].forEach((function(e){r+=e.toString()+","}))):null!==t[s]&&(r+=s+"="+t[s].toString()),r+="&";i.open("GET",e+r,!0),i.send(JSON.stringify(t))}}))}function I(e,t,a){return new Promise((function(n,i){var r;if(window.XMLHttpRequest){(r=new XMLHttpRequest).onreadystatechange=function(){4===this.readyState&&(200===this.status?n(this.responseText):i("\nAJAX Request Rejected: "+this.responseText))};var s=JSON.stringify(t);r.open(a,e,!0),r.send(s)}}))}var y=a(41),N=a(7),k=a(61),x=(a(191),a(253)),S=a(143),C=a.n(S);function w(){return i.a.createElement("div",{className:"IndexPage"},i.a.createElement(m.a,{small:!0,down:!0},i.a.createElement("div",{className:"Image"})),i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement("video",{className:"Video",autoPlay:!0,muted:!0,loop:!0},i.a.createElement("source",{id:"mp4",src:"https://storage.googleapis.com/i14-worlds-2021-gallery/default-images/GCA_Teaser_Cut.mp4",type:"video/mp4"}))),i.a.createElement("div",{className:"CenterBox"},i.a.createElement("div",{className:"Logo Element"},i.a.createElement("img",{src:C.a,alt:"Event Logo"})),i.a.createElement(x.a,{className:"Element",variant:"contained",color:"secondary"},i.a.createElement(N.b,{to:"/event"},"Learn More"))))}var O=a(145),j=a(62),_=(a(203),a(255)),R=a(256),T=a(172),B=a(79),F=a(285),A=a(257),L=a(149),D=a.n(L),P=a(147),W=a.n(P),M=a(117),V=a.n(M),U=a(118),z=a.n(U),G=a(148),J=a.n(G),H=a(119),K=a.n(H),q=a(120),X=a.n(q),Q=a(146),$=a.n(Q),Y=Object(j.a)((function(e){return{navBar:{backgroundColor:e.palette.gunmetalGray.main},menuButton:{marginRight:e.spacing(1)},title:{flexGrow:1},I14Button:{marginTop:4,backgroundColor:"transparent !important"},I14Icon:{backgroundColor:"transparent !important",width:e.spacing(4),height:e.spacing(4)},button:{margin:e.spacing(1),marginBottom:0,padding:e.spacing(1),width:"225px",alignItems:"flex-start",justifyContent:"left",textTransform:"capitalize",transitionDelay:0,transitionDuration:0},topButton:{marginTop:e.spacing(1)},link:{textDecoration:"none",display:"block"},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(1),marginRight:e.spacing(1),marginLeft:e.spacing(1)},loginButton:{padding:e.spacing(1),width:"225px",textTransform:"capitalize",position:"absolute",left:0,bottom:e.spacing(1),backgroundColor:"white"}}})),Z=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),r=a[0],s=a[1],l=window.location.pathname,o=Y(),c="";l.startsWith("/event")?c="Event":l.startsWith("/news-feed")||l.startsWith("/admin/news-feed")?c="News Feed":l.startsWith("/gallery")||l.startsWith("/admin/gallery")?c="Gallery":l.startsWith("/sailors-guide")?c="Sailors Guide":(l.startsWith("/contact-us")||l.startsWith("/admin/contact-us"))&&(c="Contact Us"),l.startsWith("/admin")&&(c+=" (Admin)");var m,d=function(){O.animateScroll.scrollToTop({duration:300})},p=i.a.createElement(i.a.Fragment,null,i.a.createElement(N.b,{to:"/event",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/event")?"secondary":"primary",startIcon:i.a.createElement(W.a,null),className:"".concat(o.button," ").concat(o.topButton)},"Event")),i.a.createElement(N.b,{to:"/news-feed",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/news-feed")?"secondary":"primary",startIcon:i.a.createElement(V.a,null),className:o.button},"News Feed")),i.a.createElement(N.b,{to:"/gallery",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/gallery")?"secondary":"primary",startIcon:i.a.createElement(z.a,null),className:o.button},"Gallery")),i.a.createElement(N.b,{to:"/sailors-guide",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/sailors-guide")?"secondary":"primary",startIcon:i.a.createElement(J.a,null),className:o.button},"Sailors Guide")),i.a.createElement(N.b,{to:"/contact-us",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/contact-us")?"secondary":"primary",startIcon:i.a.createElement(K.a,null),className:o.button},"Contact Us"))),g=i.a.createElement(i.a.Fragment,null,i.a.createElement(N.b,{to:"/admin/news-feed",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/admin/news-feed")?"secondary":"primary",startIcon:i.a.createElement(V.a,null),className:o.button},"Admin - News Feed")),i.a.createElement(N.b,{to:"/admin/gallery",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/admin/gallery")?"secondary":"primary",startIcon:i.a.createElement(z.a,null),className:o.button},"Admin - Gallery")),i.a.createElement(N.b,{to:"/admin/contact-us",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",color:l.startsWith("/admin/contact-us")?"secondary":"primary",startIcon:i.a.createElement(K.a,null),className:o.button},"Admin - Contact Us")));return m=e.loggedIn?i.a.createElement(x.a,{size:"large",startIcon:i.a.createElement(X.a,null),className:"".concat(o.button," ").concat(o.loginButton),onClick:function(){d(),e.logoutUser()}},"Logout"):i.a.createElement(N.b,{to:"/login",className:o.link,onClick:d},i.a.createElement(x.a,{size:"large",startIcon:i.a.createElement(X.a,null),className:"".concat(o.button," ").concat(o.loginButton)},"Login")),i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{position:"fixed",className:o.navBar},i.a.createElement(R.a,null,i.a.createElement(T.a,{edge:"start",color:"inherit","aria-label":"menu",className:o.menuButton,onClick:function(){return s(!0)}},i.a.createElement(D.a,null)),i.a.createElement(B.a,{variant:"h6",className:o.title},c),i.a.createElement(T.a,{edge:"end","aria-label":"index",className:o.I14Button,disableRipple:!0},i.a.createElement(N.b,{to:"/"},i.a.createElement("img",{src:$.a,className:o.I14Icon,alt:"I14 Icon"}))))),i.a.createElement(F.a,{open:r,onClose:function(){return s(!1)},onClick:function(){return s(!1)},onKeyDown:function(){return s(!1)}},i.a.createElement("div",{role:"presentation"},p,e.loggedIn&&i.a.createElement(A.a,{className:o.divider}),e.loggedIn&&g,m)))},ee=(a(204),a(150)),te=a.n(ee),ae=a(258),ne=a(259),ie=a(260),re=a(2),se=Object(j.a)((function(e){return{headline:{display:"block",textAlign:"center",color:"white",paddingBottom:e.spacing(2)},supporterBox:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),backgroundColor:e.palette.secondary.main,width:"100vw"},impressumBox:{paddingTop:e.spacing(4),paddingBottom:e.spacing(3),backgroundColor:e.palette.primary.main,width:"100vw"},simpleBox:{textAlign:"center",padding:e.spacing(1),marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function le(e){var t=se();return i.a.createElement("div",{className:"Footer"},i.a.createElement("div",{className:Object(re.a)(t.supporterBox,"SupporterBox")},i.a.createElement(ae.a,{maxWidth:"lg"},i.a.createElement(B.a,{variant:"h5",className:t.headline},"Thanks to our amazing ",i.a.createElement("strong",null,"Sponsor"),"!"),i.a.createElement(ne.a,{container:!0,justify:"center",spacing:2},i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:"DarkCard Logo"},i.a.createElement("a",{href:"https://www.vrsport.tv/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("img",{className:"WideImage",src:te.a,alt:"Logo of VR Sport TV"}))))))),i.a.createElement("div",{className:Object(re.a)(t.impressumBox,"ImpressumBox")},i.a.createElement(ae.a,{maxWidth:"lg"},i.a.createElement(ne.a,{container:!0,justify:"center",spacing:1},i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{href:"https://github.com/dostuffthatmatters",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"\xa9 Moritz Makowski")))),i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{href:"https://international14.de/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"\xa9 German International 14 Class Association"))))),i.a.createElement(ne.a,{container:!0,justify:"center",spacing:1},i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{href:"https://www.nrv.de/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"\xa9 Sven J\xfcrgensen (NRV)")))),i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{href:"https://www.vrsport.tv/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"\xa9 VR Sport TV"))))),i.a.createElement(ne.a,{container:!0,justify:"center",spacing:1},i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{className:"Box",href:"https://international14.de/datenschutz/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"Datenschutz")))),i.a.createElement(ne.a,{item:!0},i.a.createElement(ie.a,{elevation:0,className:Object(re.a)(t.simpleBox,"BrightCard","SimpleBox")},i.a.createElement("a",{className:"Box",href:"https://international14.de/impressum/",rel:"noopener noreferrer",target:"_blank"},i.a.createElement(B.a,null,"Impressum"))))))))}a(205),a(206);var oe=a(86),ce=a(78),me=a(15),de=a.n(me),pe=a(72),ge=a.n(pe),ue=a(73),he=a.n(ue),be=a(152),fe=a.n(be),ve=a(151),Ee=a.n(ve),Ie=a(153),ye=a.n(Ie),Ne=[1,2,3,4,5,6,7,9,13,15,17,20,22,25],ke=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,fullscreen:!1,imageSliderIndex:0};for(var n=[],i="https://storage.googleapis.com/i14-worlds-documents/Invitation_Images/",r=1;r<=25;r++)n.push({filepath_large:i+"Invitation_"+r.toString()+"_large.jpg",filepath_full:i+"Invitation_"+r.toString()+"_full.jpg",description:"Invitation Page "+r.toString()});return a.images=n,document.addEventListener("keydown",(function(e){"Escape"===e.key?a.state.fullscreen&&a.setState({fullscreen:!1}):a.images.length>1&&("ArrowLeft"===e.key?a.handleLeftClick():"ArrowRight"===e.key&&a.handleRightClick())})),a.handleLeftClick=a.handleLeftClick.bind(Object(h.a)(a)),a.handleRightClick=a.handleRightClick.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleLeftClick",value:function(){var e=this.state.imageSliderIndex-1;e<0&&(e+=this.images.length),this.setState({loading:!0,imageSliderIndex:e})}},{key:"handleRightClick",value:function(){var e=(this.state.imageSliderIndex+1)%this.images.length;this.setState({loading:!0,imageSliderIndex:e})}},{key:"render",value:function(){var e,t=this,a=2===this.state.imageSliderIndex,n=Ne.includes(this.state.imageSliderIndex+1),r=this.props.classes,s=this.images[this.state.imageSliderIndex].filepath_large,l=this.images.map((function(e){return i.a.createElement("link",{rel:"preload",href:e.filepath_large,as:"image"})}));e=a?i.a.createElement("video",{controls:!0,className:this.state.fullscreen?r.fullscreen_media:r.card_media},i.a.createElement("source",{src:"https://storage.googleapis.com/i14-worlds-2021-gallery/default-images/GCA_Teaser_Cut.mp4",type:"video/mp4"})):i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{className:this.state.fullscreen?r.fullscreen_media:r.card_media,src:s,alt:this.images[this.state.imageSliderIndex].description,style:{display:this.state.loading?"none":"block"},onLoad:function(){return t.setState({loading:!1})},onClick:function(){return t.setState({fullscreen:!t.state.fullscreen})}}));var o=i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{color:"inherit","aria-label":"close image slider",className:Object(re.a)(r.button,r.sizeButton,n?r.brightColor:r.darkColor,n?r.darkBackgroundColor:r.brightBackgroundColor),size:"medium",style:{zIndex:this.state.fullscreen?3e3:300},onClick:function(){return t.setState({fullscreen:!t.state.fullscreen})}},this.state.fullscreen?i.a.createElement(Ee.a,null):i.a.createElement(fe.a,null)),i.a.createElement(T.a,{color:"inherit","aria-label":"previous image",className:Object(re.a)(r.button,r.prevButton,n?r.brightColor:r.darkColor,n?r.darkBackgroundColor:r.brightBackgroundColor),size:"medium",style:{zIndex:this.state.fullscreen?3e3:300},onClick:this.handleLeftClick},i.a.createElement(ge.a,null)),i.a.createElement(T.a,{color:"inherit","aria-label":"next image",className:Object(re.a)(r.button,r.nextButton,n?r.brightColor:r.darkColor,n?r.darkBackgroundColor:r.brightBackgroundColor),size:"medium",style:{zIndex:this.state.fullscreen?3e3:300},onClick:this.handleRightClick},i.a.createElement(he.a,null))),c=i.a.createElement("div",{className:Object(re.a)(r.card_pageNumberBox,"PageNumberBox",n?r.darkColor:r.brightColor)},i.a.createElement(B.a,{variant:"h6",className:Object(re.a)(r.card_pageNumber,n?r.darkColor:r.brightColor)},this.state.imageSliderIndex+1," / ",this.images.length),i.a.createElement("div",{className:Object(re.a)(r.downloadButton)},i.a.createElement(T.a,{"aria-label":"download",className:n?r.darkColor:r.brightColor,size:"medium",onClick:function(){return window.open("https://storage.googleapis.com/i14-worlds-documents/Invitation_WM2021.pdf","_blank")}},i.a.createElement(ye.a,null))));return i.a.createElement("div",{className:this.state.fullscreen?Object(re.a)(r.fullscreen_imageSlider,"ImageSlider"):""},i.a.createElement("div",{className:this.state.fullscreen?"Image":""},i.a.createElement(ie.a,{className:this.state.fullscreen?Object(re.a)(r.card,r.fullscreen_card):Object(re.a)(r.card,"PDFPaper"),elevation:3},l,e,o,!this.state.fullscreen&&c)))}}]),t}(i.a.Component),xe=de()((function(e){return{fullscreen_imageSlider:{backgroundColor:e.palette.gunmetalGray.main},card:{display:"flex",alignItem:"center",justifyContent:"center",position:"relative",margin:e.spacing(2),textAlign:"center"},fullscreen_card:{display:"block",width:"auto",height:"auto",maxWidth:"calc(100vw - ".concat(e.spacing(4),"px)"),maxHeight:"calc(100vh - ".concat(e.spacing(4),"px)")},card_media:{display:"block",width:"100%",height:"auto",cursor:"pointer"},fullscreen_media:{display:"block",width:"auto",height:"auto",maxWidth:"calc(100vw - ".concat(e.spacing(4),"px)"),maxHeight:"calc(100vh - ".concat(e.spacing(4),"px)"),cursor:"pointer"},button:{cursor:"pointer",position:"absolute",borderRadius:"50%",color:e.palette.desireMagenta.main},sizeButton:{right:e.spacing(1),top:e.spacing(1)},prevButton:{left:e.spacing(1),top:e.spacing(1)},nextButton:{right:e.spacing(8),top:e.spacing(1)},card_pageNumberBox:{position:"absolute",top:e.spacing(1),left:0,width:"100%"},card_pageNumber:{paddingRight:e.spacing(2)},brightColor:{color:e.palette.white.main},darkColor:{color:e.palette.gunmetalGray.main},brightBackgroundColor:{backgroundColor:e.palette.white.transparent60},darkBackgroundColor:{backgroundColor:e.palette.gunmetalGray.transparent60}}}))(Object(k.h)(ke)),Se=a(154),Ce=a.n(Se),we=a(155),Oe=a.n(we),je=a(156),_e=a.n(je),Re=a(157),Te=a.n(Re),Be=a(158),Fe=a.n(Be),Ae=a(159),Le=a.n(Ae),De=a(160),Pe=a.n(De),We=a(161),Me=a.n(We),Ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={countdown:{days:0,hours:0,minutes:0,seconds:0}},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Date("Aug 8, 2021 08:00:00").getTime(),a=(new Date).getTime(),n=t-a,i=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),s=Math.floor(n%36e5/6e4),l=Math.floor(n%6e4/1e3);this.setState({countdown:{days:i,hours:r,minutes:s,seconds:l}});var o=setInterval((function(){var a=(new Date).getTime(),n=t-a,i=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),s=Math.floor(n%36e5/6e4),l=Math.floor(n%6e4/1e3);e.setState({countdown:{days:i,hours:r,minutes:s,seconds:l}}),n<0&&(clearInterval(o),e.setState({countdown:{days:0,hours:0,minutes:0,seconds:0}}))}),1e3)}},{key:"render",value:function(){var e,t=this.props.classes;return e=1866/2800>window.innerHeight/window.innerWidth?i.a.createElement("img",{className:"EventImage EventImageLandscape",src:Ce.a,alt:"Screaming Downwind"}):2666/2800>window.innerHeight/window.innerWidth?i.a.createElement("img",{className:"EventImage EventImageSquare",src:Oe.a,alt:"Screaming Downwind"}):i.a.createElement("img",{className:"EventImage EventImagePortrait",src:_e.a,alt:"Screaming Downwind"}),i.a.createElement("div",{className:Object(re.a)("EventPage",t.page)},e,i.a.createElement("div",{className:"EventImage1Overlay"},i.a.createElement("div",{className:"ContainerSmall"},i.a.createElement(oe.a,{elevation:3,className:t.paper},i.a.createElement("img",{className:Object(re.a)(t.logo,"Logo"),src:Te.a,alt:"I14 Worlds Logo"})),i.a.createElement(oe.a,{elevation:3,className:Object(re.a)(t.link,t.paper)},i.a.createElement("a",{href:"https://www.fsc.de/",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{className:Object(re.a)(t.logo,"Logo"),src:Fe.a,alt:"FSC Logo"}))))),i.a.createElement("div",{className:Object(re.a)(t.infoContainer,"InfoContainer")},i.a.createElement(oe.a,{elevation:3,className:Object(re.a)(t.link,t.paper)},i.a.createElement("a",{href:"https://www.vrsport.tv/",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("img",{className:Object(re.a)(t.logo,"Logo"),src:Le.a,alt:"VR Sport TV Logo"}))),i.a.createElement(oe.a,{elevation:3,className:Object(re.a)(t.paper,t.countdownContainer)},i.a.createElement(ne.a,{container:!0,spacing:0},i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(B.a,{variant:"h5",className:t.cardLabel},"August 8th - August 21st")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h5"},this.state.countdown.days)),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h5"},this.state.countdown.hours)),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h5"},this.state.countdown.minutes)),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h5"},this.state.countdown.seconds)),i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(m.a,{small:!0,down:!0},i.a.createElement(ne.a,{container:!0,spacing:0},i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"d")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"h")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"m")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"s")))),i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement(ne.a,{container:!0,spacing:0},i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"days")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"hours")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"minutes")),i.a.createElement(ne.a,{item:!0,xs:3},i.a.createElement(B.a,{variant:"h6"},"seconds")))))))),i.a.createElement("img",{className:"EventImage2",src:Pe.a,alt:"German Engineering"}),i.a.createElement("div",{className:Object(re.a)(t.paperContainer)},i.a.createElement(oe.a,{elevation:3,className:Object(re.a)(t.addressPaper,"AddressContainer")},i.a.createElement(ne.a,{container:!0,spacing:0},i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(B.a,{variant:"h5",className:t.cardLabel},"Flensburger Segel-Club")),i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(B.a,{variant:"h6"},"Quellental")),i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(B.a,{variant:"h6"},"24960 Gl\xfccksburg")),i.a.createElement(ne.a,{item:!0,xs:12},i.a.createElement(B.a,{variant:"h6"},i.a.createElement("a",{className:"AddressRow",href:"https://www.fsc.de/",target:"_blank",rel:"noopener noreferrer"},"www.fsc.de"))))),i.a.createElement(oe.a,{elevation:3,className:Object(re.a)(t.mapPaper,"MapPaper")},i.a.createElement(m.a,{small:!0,down:!0},i.a.createElement(ce.Map,{google:this.props.google,zoom:5,initialCenter:{lat:54.836947,lng:9.52561},style:{width:"90vw",height:"75vh",borderRadius:"inherit"}},i.a.createElement(ce.Marker,null))),i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement(ce.Map,{google:this.props.google,zoom:5,initialCenter:{lat:54.836947,lng:9.52561},style:{width:"60vw",height:"30vw",borderRadius:"inherit"}},i.a.createElement(ce.Marker,null))))),i.a.createElement("img",{className:"EventImage3",src:Me.a,alt:"I14 Culture"}),i.a.createElement("div",{className:Object(re.a)(t.paperContainer)},i.a.createElement(xe,null)))}}]),t}(i.a.Component),Ue=Object(ce.GoogleApiWrapper)({apiKey:"AIzaSyBLFzIJFaKflHG75o-GppbFAK2g91nlG6Q"})(de()((function(e){return{page:{backgroundColor:"#F0F0F0",textAlign:"center"},paper:{padding:e.spacing(2),margin:e.spacing(2)},link:{cursor:"pointer"},logo:{width:"auto"},paperContainer:{overflow:"hidden"},infoContainer:{overflow:"hidden"},addressPaper:{margin:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},mapPaper:{margin:e.spacing(2)},cardLabel:{paddingBottom:e.spacing(1)}}}))(Ve)),ze=(a(221),a(262)),Ge=a(263),Je=a(264),He=a(37),Ke=a.n(He),qe=(a(222),a(261)),Xe=a(162),Qe=a.n(Xe),$e=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,shrinkImage:!1},a.cardRef=i.a.createRef(),a.buttonRef=i.a.createRef(),document.addEventListener("keydown",(function(e){"Escape"===e.key?a.props.closeImageSlider():a.props.images.length>1&&("ArrowLeft"===e.key?a.handleLeftClick():"ArrowRight"===e.key&&a.handleRightClick())})),a.handleLeftClick=a.handleLeftClick.bind(Object(h.a)(a)),a.handleRightClick=a.handleRightClick.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleLeftClick",value:function(){var e=this.props.imageSliderIndex-1;e<0&&(e+=this.props.images.length),this.setState({loading:!0}),this.props.newImageSliderIndex(e)}},{key:"handleRightClick",value:function(){var e=(this.props.imageSliderIndex+1)%this.props.images.length;this.setState({loading:!0}),this.props.newImageSliderIndex(e)}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement("div",{className:Object(re.a)(t.imageSlider,"ImageSlider")},i.a.createElement("div",{className:"Image"},i.a.createElement(qe.a,{color:"secondary",style:{display:this.state.loading?"block":"none"}}),i.a.createElement(ie.a,{ref:this.cardRef,className:t.card,elevation:3,style:{display:this.state.loading?"none":"block"}},i.a.createElement("img",{className:t.img,src:this.props.images[this.props.imageSliderIndex].filepath_full,alt:this.props.images[this.props.imageSliderIndex].description,onLoad:function(){return e.setState({loading:!1})}}))),i.a.createElement(T.a,{ref:this.buttonRef,"aria-label":"close image slider",className:Object(re.a)(t.icon,t.closeIcon),size:"medium",onClick:this.props.closeImageSlider},i.a.createElement(Qe.a,null)),this.props.images.length>1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{"aria-label":"previous image",className:Object(re.a)(t.icon,t.prevIcon),size:"medium",onClick:this.handleLeftClick},i.a.createElement(ge.a,null)),i.a.createElement(T.a,{"aria-label":"next image",className:Object(re.a)(t.icon,t.nextIcon),size:"medium",onClick:this.handleRightClick},i.a.createElement(he.a,null))))}}]),t}(i.a.Component),Ye=de()((function(e){return{imageSlider:{backgroundColor:e.palette.gunmetalGray.main},card:{margin:e.spacing(2),maxWidth:"calc(100vw - ".concat(e.spacing(4),"px)"),maxHeight:"calc(100vh - ".concat(e.spacing(4),"px)")},img:{maxWidth:"calc(100vw - ".concat(e.spacing(4),"px)"),maxHeight:"calc(100vh - ".concat(e.spacing(4),"px)")},icon:{backgroundColor:e.palette.gunmetalGray.main,position:"fixed",color:"white",zIndex:3e3},closeIcon:{right:e.spacing(2),top:e.spacing(2)},prevIcon:{left:e.spacing(2),bottom:e.spacing(2)},nextIcon:{right:e.spacing(2),bottom:e.spacing(2)}}}))(Object(k.h)($e)),Ze={"<h6>":"<h6 class='MuiTypography-root MuiTypography-h6'>","<h5>":"<h5 class='MuiTypography-root MuiTypography-h5'>","<h4>":"<h4 class='MuiTypography-root MuiTypography-h4'>","<h3>":"<h3 class='MuiTypography-root MuiTypography-h3'>","<h2>":"<h2 class='MuiTypography-root MuiTypography-h2'>","<h1>":"<h1 class='MuiTypography-root MuiTypography-h1'>","<p>":"<p class='MuiTypography-root MuiTypography-body1'>","<a href=":"<strong><a href=","<a target=":"<strong><a target=","</a>":"</a></strong>"},et=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={imageSliderOpen:!1,imageSliderIndex:0},a.articleId=a.props.match.params.articleId,a.getArticleContent=a.getArticleContent.bind(Object(h.a)(a)),a.openImageSlider=a.openImageSlider.bind(Object(h.a)(a)),a.closeImageSlider=a.closeImageSlider.bind(Object(h.a)(a)),a.newImageSliderIndex=a.newImageSliderIndex.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"openImageSlider",value:function(){this.props.hideWebsite(!0),this.setState({imageSliderOpen:!0})}},{key:"closeImageSlider",value:function(){this.props.hideWebsite(!1),this.setState({imageSliderOpen:!1})}},{key:"newImageSliderIndex",value:function(e){this.setState({imageSliderIndex:e})}},{key:"getArticleContent",value:function(e){var t=this,a=this.props.classes;for(var n in Ze)e.content_html=e.content_html.replace(n,Ze[n]);return i.a.createElement("div",{className:"ArticleView"},i.a.createElement(B.a,{variant:"h4",className:a.headline},e.headline),i.a.createElement(ae.a,{maxWidth:"md"},i.a.createElement(ie.a,{elevation:3,className:a.card},i.a.createElement(ze.a,{className:a.cardMedia,image:e.images[this.state.imageSliderIndex].filepath_large,alt:e.images[this.state.imageSliderIndex].description,onClick:this.openImageSlider}),e.images.length>1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{"aria-label":"previous image",className:Object(re.a)(a.icon,a.prevIcon),size:"medium",onClick:function(){var a=t.state.imageSliderIndex-1;a<0&&(a+=e.images.length),t.setState({loading:!0}),t.newImageSliderIndex(a)}},i.a.createElement(ge.a,null)),i.a.createElement(T.a,{"aria-label":"next image",className:Object(re.a)(a.icon,a.nextIcon),size:"medium",onClick:function(){var a=(t.state.imageSliderIndex+1)%e.images.length;t.setState({loading:!0}),t.newImageSliderIndex(a)}},i.a.createElement(he.a,null)))),i.a.createElement("div",{className:a.articleContent+" ArticleContent",dangerouslySetInnerHTML:{__html:e.content_html}}),i.a.createElement("div",{className:a.articleCredit},i.a.createElement(B.a,{variant:"subtitle2",className:a.articleCredit},"By ",e.author))))}},{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.props.getArticleFromId(this.articleId);return e=void 0===n?i.a.createElement(B.a,{variant:"h4",className:a.headline},"Nothing here ..."):this.getArticleContent(n),i.a.createElement(i.a.Fragment,null,!this.state.imageSliderOpen&&i.a.createElement("div",{className:"NewsFeedPage"},i.a.createElement(N.b,{to:"/news-feed"},i.a.createElement(Ke.a,{className:a.backIcon,color:"secondary"})),e),this.state.imageSliderOpen&&i.a.createElement(Ye,{images:n.images,imageSliderIndex:this.state.imageSliderIndex,closeImageSlider:this.closeImageSlider,newImageSliderIndex:function(e){return t.newImageSliderIndex(e)}}))}}]),t}(i.a.Component),tt=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},card:{position:"relative",cursor:"pointer"},cardMedia:{height:0,paddingTop:"66.666%"},icon:{position:"absolute",color:"white",zIndex:3e3},prevIcon:{left:e.spacing(1),bottom:e.spacing(1)},nextIcon:{right:e.spacing(1),bottom:e.spacing(1)},articleContent:{marginTop:e.spacing(4),marginBottom:e.spacing(8)},articleCredit:{textAlign:"center"}}}))(Object(k.h)(et)),at=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,articles:[],articleIdtoIndex:{}},a.getArticleList=a.getArticleList.bind(Object(h.a)(a)),a.getArticleFromId=a.getArticleFromId.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Fetching article data"),E("/backend/database/article",{}).then((function(t){console.log("Fetching article data: successful"),e.setState({loading:!1,articles:JSON.parse(t).articles,articleIdtoIndex:JSON.parse(t).article_id_to_index})})).catch((function(){console.log("Fetching article data: failed"),e.setState({loading:!1})}))}},{key:"getArticleList",value:function(){var e=this.props.classes,t=this.state.articles.map((function(t,a){var n;return n=0===t.images.length?"https://wallpaperaccess.com/full/25637.jpg":t.images[0].filepath_medium,i.a.createElement(ne.a,{item:!0,xs:12,sm:8,md:12,key:a},i.a.createElement(N.b,{to:"/news-feed/"+t.id},i.a.createElement(c.Breakpoint,{small:!0,down:!0},i.a.createElement(ie.a,{elevation:3},i.a.createElement(ze.a,{className:e.cardImageTop,image:n}),i.a.createElement("div",{className:e.cardContentBottom},i.a.createElement("div",{className:e.cardContentOverlay}),i.a.createElement(Ge.a,{className:e.cardContent},i.a.createElement(B.a,{component:"h5",variant:"h5"},t.headline),i.a.createElement(B.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain))))),i.a.createElement(c.Breakpoint,{medium:!0,up:!0},i.a.createElement(ie.a,{className:e.card,elevation:3},i.a.createElement(ze.a,{className:e.cardImageLeft,image:n}),i.a.createElement("div",{className:e.cardContentRight},i.a.createElement("div",{className:e.cardContentOverlay}),i.a.createElement(Ge.a,{className:e.cardContent},i.a.createElement(B.a,{component:"h5",variant:"h5"},t.headline),i.a.createElement(B.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain)))))))}));return 0===this.state.articles.length?i.a.createElement(B.a,{variant:"h6",style:{textAlign:"center"}},"No posts ..."):i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center"},t)}},{key:"getArticleFromId",value:function(e){return this.state.articles[this.state.articleIdtoIndex[e]]}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,strict:!0,path:"/news-feed"},i.a.createElement("div",{className:"NewsFeedPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"News Feed"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),i.a.createElement("div",{className:e.root},!this.state.loading&&this.getArticleList()))),i.a.createElement(k.b,{path:"/news-feed/:articleId"},this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:e.headline},"Gallery"),i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&i.a.createElement(tt,{getArticleFromId:this.getArticleFromId,hideWebsite:this.props.hideWebsite})))}}]),t}(i.a.Component),nt=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},card:{display:"flex",cursor:"pointer"},cardContentRight:{position:"relative",height:e.spacing(16),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"calc(100% - ".concat(e.spacing(32),"px)")},cardContentBottom:{position:"relative",minHeight:e.spacing(10),maxHeight:e.spacing(18),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),margin:0,"&:last-child":{paddingBottom:e.spacing(1)}},cardContentOverlay:{position:"absolute",left:0,bottom:"-1px",width:"100%",height:e.spacing(4),background:"linear-gradient(0deg, rgba(255,255,255,1.0), rgba(255,255,255,0.0))"},cardImageLeft:{height:e.spacing(18),width:e.spacing(32)},cardImageTop:{height:0,paddingTop:"56.25%"}}}))(at),it=(a(223),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={imageSliderOpen:!1,imageSliderIndex:void 0},a.albumId=a.props.match.params.albumId,a.getImageList=a.getImageList.bind(Object(h.a)(a)),a.openImageSlider=a.openImageSlider.bind(Object(h.a)(a)),a.closeImageSlider=a.closeImageSlider.bind(Object(h.a)(a)),a.newImageSliderIndex=a.newImageSliderIndex.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getImageList",value:function(e){var t=this,a=this.props.classes,n=e.images.map((function(e,n){return 0===e.visible?"":i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:n},i.a.createElement(ie.a,{elevation:3,className:a.card,onClick:function(){return t.openImageSlider(n)}},i.a.createElement(ze.a,{className:a.cardMedia,image:e.filepath_medium,title:e.description,alt:e.description})))}));return i.a.createElement(ne.a,{container:!0,spacing:2},n)}},{key:"openImageSlider",value:function(e){this.props.hideWebsite(!0),this.setState({imageSliderOpen:!0,imageSliderIndex:e})}},{key:"closeImageSlider",value:function(){this.props.hideWebsite(!1),this.setState({imageSliderOpen:!1})}},{key:"newImageSliderIndex",value:function(e){this.setState({imageSliderIndex:e})}},{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.props.getAlbumFromId(this.albumId);return e=void 0===n?i.a.createElement(B.a,{variant:"h4",className:a.headline},"Nothing here ..."):i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:a.headline},n.name),this.getImageList(n)),i.a.createElement(i.a.Fragment,null,!this.state.imageSliderOpen&&i.a.createElement("div",{className:"GalleryPage"},i.a.createElement(N.b,{to:"/gallery"},i.a.createElement(Ke.a,{className:a.backIcon,color:"secondary"})),e),this.state.imageSliderOpen&&i.a.createElement(Ye,{images:n.images,imageSliderIndex:this.state.imageSliderIndex,closeImageSlider:this.closeImageSlider,newImageSliderIndex:function(e){return t.newImageSliderIndex(e)}}))}}]),t}(i.a.Component)),rt=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},root:{flexGrow:1},card:{position:"relative",cursor:"pointer"},cardMedia:{height:0,paddingTop:"66.666%"}}}))(Object(k.h)(it)),st=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,albums:[],albumIdtoIndex:{}},a.getAlbumList=a.getAlbumList.bind(Object(h.a)(a)),a.getAlbumFromId=a.getAlbumFromId.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Fetching album data"),I("/backend/database/album",{},"GET").then((function(t){console.log("Fetching album data: successful"),e.setState({loading:!1,albums:JSON.parse(t).albums,albumIdtoIndex:JSON.parse(t).album_id_to_index})})).catch((function(){console.log("Fetching album data: failed"),e.setState({loading:!1})}))}},{key:"getAlbumList",value:function(){var e=this.props.classes;if(0===this.state.albums.length)return i.a.createElement(B.a,{variant:"h6",className:e.headline},"No images ...");var t=this.state.albums.map((function(t,a){return 0===t.visible_image_count?"":(n=0===t.title_image_id?"https://storage.googleapis.com/i14-worlds-2021-gallery/default-images/default-image-1-medium.jpg":t.images[t.image_id_to_index[t.title_image_id]].filepath_medium,i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:a},i.a.createElement(N.b,{to:"gallery/"+t.id},i.a.createElement(ie.a,{elevation:3,className:e.card},i.a.createElement(ze.a,{className:e.cardMedia,image:n,alt:"Images inside "+t.name}),i.a.createElement(Ge.a,{className:e.cardContent},t.name)))));var n}));return i.a.createElement(ne.a,{container:!0,spacing:2},t)}},{key:"getAlbumFromId",value:function(e){return this.state.albums[this.state.albumIdtoIndex[e]]}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,strict:!0,path:"/gallery"},i.a.createElement("div",{className:"GalleryPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Gallery"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),!this.state.loading&&i.a.createElement("div",{className:e.root},this.getAlbumList()))),i.a.createElement(k.b,{path:"/gallery/:albumId"},this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:e.headline},"Gallery"),i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&i.a.createElement(rt,{getAlbumFromId:this.getAlbumFromId,hideWebsite:this.props.hideWebsite})))}}]),t}(i.a.Component),lt=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},root:{flexGrow:1},card:{position:"relative",cursor:"pointer",minWidth:250},cardMedia:{height:0,paddingTop:"66.666%"},cardContent:{position:"absolute",display:"block",width:"100%",left:0,bottom:0,paddingTop:e.spacing(1),paddingRight:0,paddingBottom:e.spacing(1),paddingLeft:0,margin:0,"&:last-child":{paddingBottom:e.spacing(1)},backgroundColor:"hsla(0, 0%, 0%, 0.75)",color:"white",textAlign:"center",fontSize:"1.2rem"}}}))(st),ot=(a(224),a(282)),ct=a(269),mt=a(270),dt=a(271),pt=a(74),gt=a.n(pt),ut=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={deleteDialogOpen:!1},a.nameInputRef=i.a.createRef(),a.pushCurrentVersion=a.pushCurrentVersion.bind(Object(h.a)(a)),a.handleNameKeyDown=a.handleNameKeyDown.bind(Object(h.a)(a)),a.handleNameChange=a.handleNameChange.bind(Object(h.a)(a)),a.handleBlur=a.handleBlur.bind(Object(h.a)(a)),a.triggerRemove=a.triggerRemove.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"pushCurrentVersion",value:function(){I("/backend/database/album",{email:this.props.api.email,api_key:this.props.api.api_key,album_id:this.props.album.id,album_name:this.props.album.name},"PUT").then().catch()}},{key:"handleNameChange",value:function(e){var t={id:this.props.album.id,name:e.target.value,image_count:this.props.album.image_count,visible_image_count:this.props.album.visible_image_count,title_image_id:this.props.album.title_image_id,image_id_to_index:this.props.album.image_id_to_index,images:this.props.album.images};this.props.updateAlbumState(this.props.index,t)}},{key:"handleNameKeyDown",value:function(e){13!==e.which&&9!==e.which||(e.preventDefault(),this.nameInputRef.current.blur())}},{key:"handleBlur",value:function(){this.pushCurrentVersion()}},{key:"triggerRemove",value:function(){var e=this;I("/backend/database/album",{email:this.props.api.email,api_key:this.props.api.api_key,album_id:this.props.album.id},"DELETE").then((function(){e.setState({deleteDialogOpen:!1}),e.props.removeAlbumFromView(e.props.index)})).catch((function(){e.setState({deleteDialogOpen:!1})}))}},{key:"render",value:function(){var e,t=this,a=this.props.classes;return e=0===this.props.album.title_image_id?"https://storage.googleapis.com/i14-worlds-2021-gallery/default-images/default-image-1-medium.jpg":this.props.album.images[this.props.album.image_id_to_index[this.props.album.title_image_id]].filepath_medium,i.a.createElement(ie.a,{elevation:3,className:a.card},i.a.createElement(N.b,{to:this.props.path},i.a.createElement(ze.a,{className:a.cardMedia,image:e,alt:"Images inside "+this.props.album.name})),i.a.createElement(Ge.a,{className:a.cardContent},i.a.createElement(ot.a,{fullWidth:!0,label:"Name",value:this.props.album.name,onChange:this.handleNameChange,onKeyDown:this.handleNameKeyDown,onBlur:this.handleBlur,inputRef:this.nameInputRef,className:a.textField}),i.a.createElement(gt.a,{className:a.deleteIcon,onClick:function(){return t.setState({deleteDialogOpen:!0})}})),this.state.deleteDialogOpen&&i.a.createElement(ct.a,{open:!0,"aria-labelledby":"alert-dialog-title"},i.a.createElement(mt.a,{id:"alert-dialog-title"},"Do you really want to delete this album?"),i.a.createElement(dt.a,null,i.a.createElement(x.a,{onClick:function(){return t.setState({deleteDialogOpen:!1})},color:"primary"},"Disagree"),i.a.createElement(x.a,{onClick:this.triggerRemove,color:"secondary",autoFocus:!0},"Agree"))))}}]),t}(i.a.Component),ht=de()((function(e){return{card:{position:"relative",cursor:"pointer",minWidth:250},cardMedia:{height:0,paddingTop:"66.666%"},cardContent:{padding:e.spacing(1),margin:0,"&:last-child":{padding:e.spacing(1)},display:"flex",position:"relative"},textField:{alignSelf:"flex-end",marginRight:e.spacing(4)},deleteIcon:{cursor:"pointer",position:"absolute",right:e.spacing(1),bottom:e.spacing(1)}}}))(ut),bt=a(55),ft=a.n(bt),vt=a(56),Et=a.n(vt),It=a(98),yt=a.n(It),Nt=a(163),kt=a.n(Nt),xt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={deleteDialogOpen:!1},a.toggleTitleImage=a.toggleTitleImage.bind(Object(h.a)(a)),a.toggleVisibility=a.toggleVisibility.bind(Object(h.a)(a)),a.triggerRemove=a.triggerRemove.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"toggleTitleImage",value:function(){var e=this.props.titleImage?0:this.props.image.id,t={email:this.props.api.email,api_key:this.props.api.api_key,album_id:this.props.albumId,album_title_image_id:e};this.props.updateTitleImageId(e),I("/backend/database/album",t,"PUT").then().catch()}},{key:"toggleVisibility",value:function(){var e;e=1===this.props.image.visible?0:1;var t={description:this.props.image.description,timestamp:this.props.image.description,filepath_small:this.props.image.filepath_small,filepath_medium:this.props.image.filepath_medium,filepath_large:this.props.image.filepath_large,filepath_full:this.props.image.filepath_full,visible:e,id:this.props.image.id};this.props.updateState(this.props.index,t),I("/backend/database/image",{email:this.props.api.email,api_key:this.props.api.api_key,image_id:this.props.image.id,image_visible:e},"PUT").then().catch()}},{key:"triggerRemove",value:function(){var e=this;I("/backend/database/image",{email:this.props.api.email,api_key:this.props.api.api_key,image_id:this.props.image.id},"DELETE").then((function(){e.setState({deleteDialogOpen:!1}),e.props.removeImageFromView(e.props.index)})).catch((function(){e.setState({deleteDialogOpen:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement(ie.a,{className:Object(re.a)(t.paper,1===this.props.image.visible?"":t.invisiblePaper),elevation:3},i.a.createElement(N.b,{to:"/admin/gallery/"+this.props.albumId+"/"+this.props.image.id},i.a.createElement(ze.a,{className:t.cardMedia,image:this.props.image.filepath_medium,alt:this.props.image.description})),i.a.createElement(Ge.a,{className:t.cardContent},i.a.createElement("div",{className:t.visibilityBox},1===this.props.image.visible&&i.a.createElement(ft.a,{onClick:this.toggleVisibility,className:t.visibilityIcon}),0===this.props.image.visible&&i.a.createElement(Et.a,{onClick:this.toggleVisibility,className:t.visibilityIcon}),i.a.createElement(B.a,{className:t.visibilityText,variant:"body1"},this.props.image.visible?"Currently Visible":"Currently Invisible"))),i.a.createElement(gt.a,{className:t.removeIcon,onClick:function(){return e.setState({deleteDialogOpen:!0})}}),this.props.titleImage&&i.a.createElement(yt.a,{className:t.favoriteIcon,onClick:this.toggleTitleImage}),!this.props.titleImage&&i.a.createElement(kt.a,{className:t.favoriteIcon,onClick:this.toggleTitleImage}),this.state.deleteDialogOpen&&i.a.createElement(ct.a,{open:!0,"aria-labelledby":"alert-dialog-title"},i.a.createElement(mt.a,{id:"alert-dialog-title"},"Do you really want to delete this image?"),i.a.createElement(dt.a,null,i.a.createElement(x.a,{onClick:function(){return e.setState({deleteDialogOpen:!1})},color:"primary"},"Disagree"),i.a.createElement(x.a,{onClick:this.triggerRemove,color:"secondary",autoFocus:!0},"Agree"))))}}]),t}(i.a.Component),St=de()((function(e){return{paper:{position:"relative"},invisiblePaper:{backgroundColor:"rgb(230, 230, 230)"},cardMedia:{height:0,paddingTop:"66.666%"},cardContent:{padding:e.spacing(1),margin:0,"&:last-child":{padding:e.spacing(1)},display:"flex",position:"relative"},visibilityBox:{display:"flex",justifyContent:"left",alignItems:"center",flexDirection:"row",margin:e.spacing(1)},visibilityIcon:{marginRight:e.spacing(2),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},removeIcon:{cursor:"pointer",position:"absolute",right:e.spacing(2),bottom:e.spacing(2)},favoriteIcon:{cursor:"pointer",position:"absolute",right:e.spacing(2),top:e.spacing(2),color:e.palette.desireMagenta.transparent80}}}))(xt),Ct=a(267),wt=a(279),Ot=a(277),jt=a(280),_t=function(e){var t=i.a.useState(e.value),a=Object(y.a)(t,2),n=a[0],r=a[1];return i.a.createElement(Ct.a,{className:"className"in e?e.className:""},i.a.createElement(wt.a,{id:"select-label"},e.label),i.a.createElement(Ot.a,{labelId:"select-label",id:"demo-simple-select",value:n,onChange:function(t){r(t.target.value),"onChange"in e&&e.onChange(t.target.value)}},Object.keys(e.selectOptions).map((function(t,a){return i.a.createElement(jt.a,{key:a,value:t},e.selectOptions[t])}))))},Rt=a(27),Tt=a(272),Bt=a(103),Ft=function(e){var t=i.a.useState(new Date(1e3*e.timestamp)),a=Object(y.a)(t,2),n=a[0],r=a[1],s="className"in e?e.className:void 0;return i.a.createElement(Rt.a,{utils:Bt.a},i.a.createElement(Tt.a,{className:void 0!==s?s:"",margin:"normal",id:"date-picker",label:"Date",format:"dd/MM/yyyy",value:n,onChange:function(t){r(t),"updateTimestamp"in e&&e.updateTimestamp(Math.round(t.getTime()/1e3))},KeyboardButtonProps:{"aria-label":"change date"}}))},At=a(286),Lt=function(e){var t=i.a.useState(new Date(1e3*e.timestamp)),a=Object(y.a)(t,2),n=a[0],r=a[1],s="className"in e?e.className:void 0;return i.a.createElement(Rt.a,{utils:Bt.a},i.a.createElement(At.a,{className:void 0!==s?s:"",margin:"normal",id:"time-picker",label:"Time",value:n,onChange:function(t){r(t),"updateTimestamp"in e&&e.updateTimestamp(Math.round(t.getTime()/1e3))},KeyboardButtonProps:{"aria-label":"change time"}}))},Dt=i.a.forwardRef((function(e,t){var a=i.a.useState("value"in e?e.value:""),n=Object(y.a)(a,2),r=n[0],s=n[1];return i.a.createElement(ot.a,{fullWidth:"fullWidth"in e&&e.fullWidth,className:"className"in e?e.className:"",multiline:"multiline"in e&&e.multiline,rowsMax:"rowsMax"in e?e.rowsMax:"1",value:r,inputRef:t,onChange:function(t){s(t.target.value),"onChange"in e&&e.onChange(t.target.value)},onKeyDown:function(t){"onTab"in e&&9===t.which?(t.preventDefault(),e.onTab(t.target.value)):"onEnter"in e&&13===t.which?(t.preventDefault(),e.onEnter(t.target.value)):"onEscape"in e&&27===t.which&&(console.log("Triggering Escape"),t.preventDefault(),e.onEscape(t.target.value))},onBlur:function(t){"onBlur"in e&&e.onBlur(t.target.value)},label:e.label})})),Pt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).albumId=a.props.match.params.albumId,a.imageId=a.props.match.params.imageId,a.state={description:void 0,timestamp:void 0,albumId:a.albumId,saving:!1},a.descriptionInputRef=i.a.createRef(),a.processSave=a.processSave.bind(Object(h.a)(a)),a.getImageForm=a.getImageForm.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"processSave",value:function(){var e=this;console.log("Saving image"),this.setState({saving:!0});var t={email:this.props.api.email,api_key:this.props.api.api_key,image_id:this.imageId},a=!1;void 0!==this.state.description&&(t.image_description=this.state.description,a=!0),void 0!==this.state.albumId&&(t.image_album_id=this.state.albumId,a=!0),void 0!==this.state.timestamp&&(t.image_timestamp=this.state.timestamp,a=!0),a?I("/backend/database/image",t,"PUT").then((function(t){console.log("Saving image: Status = "+t),void 0!==e.state.albumId&&e.state.albumId!==e.albumId?window.open("/admin/gallery/"+e.state.albumId+"/"+e.imageId,"_self"):(void 0!==e.state.description&&(e.props.album.images[e.props.album.image_id_to_index[e.imageId]].description=e.state.description),void 0!==e.state.timestamp&&(e.props.album.images[e.props.album.image_id_to_index[e.imageId]].timestamp=e.state.timestamp),e.setState({description:void 0,timestamp:void 0,saving:!1}))})).catch((function(){console.log("Saving image: failed"),e.setState({saving:!1})})):this.setState({saving:!1})}},{key:"getImageForm",value:function(e){var t=this,a=this.props.classes,n=i.a.createElement(ne.a,{container:!0,spacing:1,justify:"center",alignItems:"center"},i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(_t,{label:"Album",value:this.state.albumId,selectOptions:this.props.albumIdtoNameDict,onChange:function(e){return t.setState({albumId:e})},className:a.formControl})),i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(Ft,{timestamp:void 0===this.state.timestamp?parseInt(e.timestamp):this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.datepicker})),i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(Lt,{timestamp:void 0===this.state.timestamp?parseInt(e.timestamp):this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.timepicker})),i.a.createElement(ne.a,{item:!0,xs:12,className:a.gridItem},i.a.createElement(Dt,{fullWidth:!0,className:a.descriptionInput,value:void 0===this.state.description?e.description:this.state.description,ref:this.descriptionInputRef,onChange:function(e){return t.setState({description:e})},onEnter:function(){return t.descriptionInputRef.current.blur()},onTab:function(){return t.descriptionInputRef.current.blur()},onEscape:function(){return t.descriptionInputRef.current.blur()},label:"Description"})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{elevation:3,className:a.card},i.a.createElement(ze.a,{className:a.cardMedia,image:e.filepath_large,alt:e.filepath_large}),i.a.createElement(Ge.a,{className:a.cardContent},n)),i.a.createElement("div",{className:a.saveButtonWrapper},i.a.createElement("div",{className:a.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.saving?"default":"secondary",onClick:this.processSave,className:a.button},"Save Changes"),this.state.saving&&i.a.createElement(qe.a,{size:24,className:a.buttonProgress,color:"secondary"}))))}},{key:"render",value:function(){var e,t,a=this.props.classes;return void 0!==this.props.album&&(e=this.props.album.images[this.props.album.image_id_to_index[this.imageId]]),t=void 0===this.props.album||void 0===e?i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:a.headline},"Nothing here ...")):i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:a.headline},"Edit Image"),this.getImageForm(e)),i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(N.b,{to:"/admin/gallery/"+this.albumId},i.a.createElement(Ke.a,{className:a.backIcon,color:"secondary"})),t)}}]),t}(i.a.Component),Wt=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2)},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginTop:e.spacing(3),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},saveButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},cardMedia:{height:0,paddingTop:"66.666%"}}}))(Object(k.h)(Pt)),Mt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).albumId=a.props.match.params.albumId,a.getImageList=a.getImageList.bind(Object(h.a)(a)),a.updateState=a.updateState.bind(Object(h.a)(a)),a.removeImageFromView=a.removeImageFromView.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"getImageList",value:function(e){var t=this,a=this.props.classes;if(0===e.images.length)return i.a.createElement(B.a,{variant:"h6",className:a.headline},"No images ...");var n=e.images.map((function(a,n){return i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:n},i.a.createElement(St,{albumId:t.albumId,titleImage:e.title_image_id===a.id,updateTitleImageId:function(a){return t.props.updateTitleImageId(e.id,a)},image:a,index:n,updateState:t.updateState,api:t.props.api,removeImageFromView:t.removeImageFromView}))}));return i.a.createElement(ne.a,{container:!0,spacing:2},n)}},{key:"updateState",value:function(e,t){this.props.updateImageState(this.albumId,e,t)}},{key:"removeImageFromView",value:function(e){this.props.removeImageFromView(this.albumId,e)}},{key:"render",value:function(){var e,t=this.props.classes,a=this.props.getAlbumFromId(this.albumId);return e=void 0===a?i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:t.headline},"Nothing here ...")):i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:t.headline},a.name),this.getImageList(a)),i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(N.b,{to:"/admin/gallery"},i.a.createElement(Ke.a,{className:t.backIcon,color:"secondary"})),i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,path:"/admin/gallery/"+this.albumId},e),i.a.createElement(k.b,{path:"/admin/gallery/:albumId/:imageId"},i.a.createElement(Wt,{api:this.props.api,albumIds:this.props.albumIds,albumIdtoNameDict:this.props.albumIdtoNameDict,album:a,triggerReload:this.props.triggerReload}))))}}]),t}(i.a.Component),Vt=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},buttonRow:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},card:{position:"relative",cursor:"pointer",minWidth:250},cardMedia:{height:0,paddingTop:"66.666%"},cardContent:{padding:e.spacing(1),margin:0,"&:last-child":{padding:e.spacing(1)},display:"flex",position:"relative"},textField:{alignSelf:"flex-end",marginRight:e.spacing(4)},deleteIcon:{cursor:"pointer",position:"absolute",right:e.spacing(1),bottom:e.spacing(1)},visibilityBox:{display:"flex",justifyContent:"left",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(2),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},removeIcon:{cursor:"pointer",position:"absolute",right:e.spacing(2),bottom:e.spacing(2)}}}))(Object(k.h)(Mt)),Ut=a(164),zt=a.n(Ut),Gt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={uploading:!1,description:"",timestamp:Math.round(Date.now()/1e3),albumId:a.props.albumIds[0],file:void 0,visible:1},a.descriptionInputRef=i.a.createRef(),a.processUpload=a.processUpload.bind(Object(h.a)(a)),a.getUploadForm=a.getUploadForm.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"processUpload",value:function(){var e=this;console.log("Uploading image"),this.setState({uploading:!0});var t,a,n=new FormData,i=document.getElementById("select-file-button").files;1===i.length?(n.append("email",this.props.api.email),n.append("api_key",this.props.api.api_key),n.append("image_file",i[0],i[0].name),n.append("image_timestamp",this.state.timestamp),n.append("image_description",this.state.description),n.append("image_album_id",this.state.albumId),n.append("image_visible",this.state.visible),(t="/backend/database/image",a=n,new Promise((function(e,n){var i;window.XMLHttpRequest&&((i=new XMLHttpRequest).onreadystatechange=function(){4===this.readyState&&(200===this.status?e(this.responseText):n("\nAJAX Request Rejected: "+this.responseText))},i.open("POST",t,!0),i.send(a))}))).then((function(t){console.log("Uploading image: Status = "+t),e.setState({uploading:!1,description:"",file:void 0})})).catch((function(){console.log("Uploading image: failed"),e.setState({uploading:!1})}))):this.setState({uploading:!1})}},{key:"getUploadForm",value:function(){var e=this,t=this.props.classes,a=i.a.createElement(ne.a,{container:!0,spacing:1,justify:"center",alignItems:"center"},i.a.createElement(ne.a,{item:!0,xs:12,className:t.gridItem},i.a.createElement("input",{accept:"image/*",className:t.hiddenInput,id:"select-file-button",type:"file",onChange:function(t){return e.setState({file:t.target.value})}}),i.a.createElement("label",{htmlFor:"select-file-button"},i.a.createElement(x.a,{variant:"contained",color:"default",className:t.selectButton,startIcon:i.a.createElement(zt.a,{color:"primary"}),component:"span"},void 0===this.state.file?"Select File":this.state.file.split("\\").pop()))),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(_t,{label:"Album",value:this.state.albumId,selectOptions:this.props.albumIdtoNameDict,onChange:function(t){return e.setState({albumId:t})},className:t.formControl})),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(Ft,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.datepicker})),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(Lt,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.timepicker})),i.a.createElement(ne.a,{item:!0,xs:12,className:t.gridItem},i.a.createElement(Dt,{fullWidth:!0,className:t.descriptionInput,value:this.state.description,ref:this.descriptionInputRef,onChange:function(t){return e.setState({description:t})},onEnter:function(){return e.descriptionInputRef.current.blur()},onTab:function(){return e.descriptionInputRef.current.blur()},onEscape:function(){return e.descriptionInputRef.current.blur()},label:"Description"})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{elevation:3,className:t.card},i.a.createElement(Ge.a,{className:t.cardContent},a)),i.a.createElement("div",{className:t.uploadButtonWrapper},i.a.createElement("div",{className:t.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.uploading?"default":"secondary",onClick:this.processUpload,className:t.button},"Upload Image"),this.state.uploading&&i.a.createElement(qe.a,{size:24,className:t.buttonProgress,color:"secondary"}))))}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement(N.b,{to:"/admin/gallery",onClick:this.props.triggerReload},i.a.createElement(Ke.a,{className:e.backIcon,color:"secondary"}))),i.a.createElement(B.a,{variant:"h4",className:e.headline},"Image Upload"),i.a.createElement(A.a,{className:e.divider}),this.getUploadForm())}}]),t}(i.a.Component),Jt=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2)},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginTop:e.spacing(3),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},uploadButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}}))(Gt),Ht=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,albums:[],creatingAlbum:!1},a.updateTitleImageId=a.updateTitleImageId.bind(Object(h.a)(a)),a.triggerReload=a.triggerReload.bind(Object(h.a)(a)),a.getAlbumFromId=a.getAlbumFromId.bind(Object(h.a)(a)),a.getAlbumList=a.getAlbumList.bind(Object(h.a)(a)),a.createAlbum=a.createAlbum.bind(Object(h.a)(a)),a.updateAlbumState=a.updateAlbumState.bind(Object(h.a)(a)),a.updateImageState=a.updateImageState.bind(Object(h.a)(a)),a.removeAlbumFromView=a.removeAlbumFromView.bind(Object(h.a)(a)),a.removeImageFromView=a.removeImageFromView.bind(Object(h.a)(a)),a.getAlbumIds=a.getAlbumIds.bind(Object(h.a)(a)),a.getAlbumIdtoNameDict=a.getAlbumIdtoNameDict.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.triggerReload()}},{key:"updateTitleImageId",value:function(e,t){var a=this.state.albums;a[this.state.albumIdtoIndex[e]].title_image_id=t,this.setState({albums:a})}},{key:"triggerReload",value:function(){var e=this;console.log("Fetching album data"),E("/backend/database/album",{email:this.props.api.email,api_key:this.props.api.api_key}).then((function(t){console.log("Fetching album data: successful"),e.setState({loading:!1,albums:JSON.parse(t).albums,albumIdtoIndex:JSON.parse(t).album_id_to_index})})).catch((function(){console.log("Fetching album data: failed"),e.setState({loading:!1})}))}},{key:"getAlbumFromId",value:function(e){return this.state.albums[this.state.albumIdtoIndex[e]]}},{key:"getAlbumList",value:function(){var e=this,t=this.props.classes;if(0===this.state.albums.length)return i.a.createElement(B.a,{variant:"h6",className:t.headline},"No albums ...");var a=this.state.albums.map((function(t,a){return i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:a},i.a.createElement(ht,{path:"/admin/gallery/"+t.id,album:t,api:e.props.api,index:a,updateAlbumState:e.updateAlbumState,removeAlbumFromView:e.removeAlbumFromView}))}));return i.a.createElement(ne.a,{container:!0,spacing:2},a)}},{key:"createAlbum",value:function(){var e=this;console.log("Creating new album"),this.setState({creatingAlbum:!0}),I("/backend/database/album",{email:this.props.api.email,api_key:this.props.api.api_key},"POST").then((function(t){console.log("Creating new album: successful");var a={id:JSON.parse(t).new_album_id,name:"",image_count:0,visible_image_count:0,title_image_id:0,image_id_to_index:{},images:[]},n=e.state.albums;n.push(a);var i=e.state.albumIdtoIndex;i[JSON.parse(t).new_album_id]=e.state.albums.length,e.setState({creatingAlbum:!1,albums:n,albumIdtoIndex:i})})).catch((function(){console.log("Creating new album: failed"),e.setState({creatingAlbum:!1})}))}},{key:"updateAlbumState",value:function(e,t){var a=this.state.albums;a[e]=t,this.setState({albums:a})}},{key:"updateImageState",value:function(e,t,a){var n=this.state.albums;n[this.state.albumIdtoIndex[e]].images[t]=a,this.setState({albums:n})}},{key:"removeAlbumFromView",value:function(e){for(var t=[],a=0;a<this.state.albums.length;a++)a!==e&&t.push(this.state.albums[a]);this.setState({albums:t})}},{key:"removeImageFromView",value:function(e,t){for(var a=[],n=0;n<this.state.albums.length;n++)if(n===this.state.albumIdtoIndex[e]){for(var i=[],r=0;r<this.state.albums[n].images.length;r++)r!==t&&i.push(this.state.albums[n].images[r]);var s=this.state.albums[n];s.images=i,a.push(s)}else a.push(this.state.albums[n]);this.setState({albums:a})}},{key:"getAlbumIds",value:function(){for(var e=[],t=0;t<this.state.albums.length;t++)e.push(this.state.albums[t].id);return e}},{key:"getAlbumIdtoNameDict",value:function(){for(var e={},t=0;t<this.state.albums.length;t++)e[this.state.albums[t].id]=this.state.albums[t].name;return e}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,path:"/admin/gallery/new"},this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),!this.state.loading&&i.a.createElement(Jt,{api:this.props.api,albumIds:this.getAlbumIds(),albumIdtoNameDict:this.getAlbumIdtoNameDict(),triggerReload:this.triggerReload})),i.a.createElement(k.b,{exact:!0,path:"/admin/gallery"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Admin - Gallery"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),!this.state.loading&&i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.buttonRow},i.a.createElement("div",{className:e.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.creatingAlbum?"default":"secondary",onClick:this.createAlbum,className:e.button},"Add Album"),this.state.creatingAlbum&&i.a.createElement(qe.a,{size:24,className:e.buttonProgress,color:"secondary"})),i.a.createElement("div",{className:e.buttonSpinnerWrapper},i.a.createElement(N.b,{to:"/admin/gallery/new"},i.a.createElement(x.a,{variant:"contained",color:"secondary",className:e.button},"Add Image")))),i.a.createElement(A.a,{className:e.divider}),this.getAlbumList())),i.a.createElement(k.b,{path:"/admin/gallery/:albumId"},this.state.loading&&i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Gallery"),i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&i.a.createElement(Vt,{getAlbumFromId:this.getAlbumFromId,api:this.props.api,updateTitleImageId:this.updateTitleImageId,updateImageState:this.updateImageState,removeImageFromView:this.removeImageFromView,albumIds:this.getAlbumIds(),albumIdtoNameDict:this.getAlbumIdtoNameDict(),triggerReload:this.triggerReload}))))}}]),t}(i.a.Component),Kt=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},root:{flexGrow:1},buttonRow:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}))(Ht);a(225),a(278),a(273),a(274),a(165),Object(j.a)((function(e){return{root:{width:"100%"},coloredRow:{backgroundColor:"hsl(210, 100%, 97.5%)"},gridItem:{display:"flex",alignItems:"center",justifyContent:"left",whiteSpace:"pre-line"},detailsBlock:{marginRight:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},mobileDetailLabel:{paddingBottom:e.spacing(1)}}}));Object(j.a)((function(e){return{root:{width:"100%"},gridItem:{display:"flex",alignItems:"center",justifyContent:"left"},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}));var qt=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"SailorsGuidePage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Sailors Guide"),i.a.createElement(B.a,{variant:"h6",className:e.headlineSmall},"Preliminary schedule coming soon!"))}}]),t}(i.a.Component),Xt=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},headlineSmall:{display:"block",textAlign:"center",marginBottom:e.spacing(2)}}}))(qt),Qt=(a(226),a(102)),$t=a.n(Qt),Yt=a(84),Zt=a.n(Yt),ea=a(85),ta=a.n(ea),aa=a(166),na=a.n(aa),ia=a(167),ra=a.n(ia),sa=a(168),la=a.n(sa),oa=a(169),ca=a.n(oa),ma=a(170),da=a.n(ma),pa=[{name:"Henning Uck",email:"henning.uck@hotmail.de",flag:na.a,alt:"AUS Flag"},{name:"Andrew McConnell",email:"mcconnell.aps@gmail.com",flag:ra.a,alt:"CAN Flag"},{name:"Mathias Nippel",email:"mathiasnippel@gmail.com",flag:la.a,alt:"JPN Flag"},{name:"Dennis Gehrlein",email:"gehrleindennis@gmail.com",flag:ca.a,alt:"US Flag"},{name:"Lasse Nielandt",email:"lasse.nielandt@gmail.com",flag:da.a,alt:"EURO Flag"}],ga=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,contacts:[]},a.getContactList=a.getContactList.bind(Object(h.a)(a)),a.getCountryHostList=a.getCountryHostList.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Fetching contact data"),E("/backend/database/contact",{}).then((function(t){console.log("Fetching contact data: successful"),e.setState({loading:!1,contacts:JSON.parse(t).contacts})})).catch((function(){console.log("Fetching contact data: failed"),e.setState({loading:!1})}))}},{key:"getContactList",value:function(){var e=this.props.classes,t=this.state.contacts.map((function(t,a){return 0===t.visible?"":i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:5,lg:5,xl:5,key:a},i.a.createElement(ie.a,{className:e.paper,elevation:3},i.a.createElement("div",{className:e.contact_line},i.a.createElement($t.a,{className:e.contact_icon}),i.a.createElement(B.a,{variant:"body1",className:e.contact_label},t.role)),i.a.createElement("div",{className:e.contact_line},i.a.createElement(Zt.a,{className:e.contact_icon}),i.a.createElement(B.a,{variant:"body1",className:e.contact_label},t.name)),i.a.createElement("div",{className:e.contact_line},i.a.createElement(ta.a,{className:e.contact_icon}),i.a.createElement(B.a,{variant:"body1",className:e.contact_label},t.email))))}));return 0===this.state.contacts.length?i.a.createElement(B.a,{variant:"h6",style:{textAlign:"center"}},"No contacts ..."):i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center"},t)}},{key:"getCountryHostList",value:function(){var e=this.props.classes,t=pa.map((function(t,a){return i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:5,lg:5,xl:5,key:a},i.a.createElement(ie.a,{elevation:3},i.a.createElement(ze.a,{className:e.cardMedia,image:t.flag,title:t.alt,alt:t.alt}),i.a.createElement(Ge.a,{className:e.cardContent},i.a.createElement("div",{className:e.countryLinePadding},i.a.createElement(Zt.a,{className:e.contact_icon}),i.a.createElement(B.a,{variant:"body1",className:e.contact_label},t.name)),i.a.createElement("div",null,i.a.createElement(ta.a,{className:e.contact_icon}),i.a.createElement(B.a,{variant:"body1",className:e.contact_label},t.email)))))}));return i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center"},t)}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"ContactUsPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Contact Us"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),i.a.createElement("div",{className:e.root},!this.state.loading&&this.getContactList()),i.a.createElement(B.a,{variant:"h4",className:"".concat(e.headline," ").concat(e.headline2)},"Country Hosts"),i.a.createElement("div",{className:e.root},this.getCountryHostList()))}}]),t}(i.a.Component),ua=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},headline2:{marginTop:e.spacing(8)},root:{flexGrow:1},paper:{padding:e.spacing(1)},contact_line:{display:"block",padding:e.spacing(1)},country_line:{display:"block",padding:0},contact_icon:{display:"inline-flex",verticalAlign:"top"},contact_label:{display:"inline-flex",verticalAlign:"top",marginTop:0,marginBottom:0,marginLeft:e.spacing(1),marginRight:0,whiteSpace:"nowrap",overflow:"hidden"},card:{position:"relative",padding:0},cardMedia:{height:0,paddingTop:"50%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),margin:0,"&:last-child":{paddingBottom:e.spacing(2)}},countryLinePadding:{paddingBottom:e.spacing(1)}}}))(ga),ha=(a(227),function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.props.favorite?i.a.createElement(ie.a,{className:Object(re.a)(e.paper,e.favoritePaper),elevation:3,onClick:this.props.onClick},i.a.createElement(ze.a,{className:Object(re.a)(e.cardMedia,e.borderMedia),image:this.props.image.filepath_medium,alt:this.props.image.description}),i.a.createElement(yt.a,{className:Object(re.a)(e.cardIcon,e.favoriteIcon)})):this.props.selected?i.a.createElement(ie.a,{className:Object(re.a)(e.paper,e.selectedPaper),elevation:3,onClick:this.props.onClick},i.a.createElement(ze.a,{className:Object(re.a)(e.cardMedia,e.borderMedia),image:this.props.image.filepath_medium,alt:this.props.image.description})):i.a.createElement(ie.a,{className:e.paper,elevation:3,onClick:this.props.onClick},i.a.createElement(ze.a,{className:e.cardMedia,image:this.props.image.filepath_medium,alt:this.props.image.description}))}}]),t}(i.a.Component)),ba=de()((function(e){return{paper:{position:"relative",cursor:"pointer"},favoritePaper:{margin:"-3px",border:"3px solid",borderColor:e.palette.desireMagenta.transparent80},selectedPaper:{margin:"-3px",border:"3px solid",borderColor:e.palette.pinctonBlue.transparent80},cardMedia:{height:"auto",paddingTop:"66.666%",overflow:"visible"},cardIcon:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)},favoriteIcon:{color:e.palette.desireMagenta.transparent80}}}))(ha),fa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={albums:void 0,albumId:void 0,albumIdtoIndex:void 0,albumIdtoNameDict:void 0},a.ToggleFavoriteImage=a.ToggleFavoriteImage.bind(Object(h.a)(a)),a.ToggleSelectedImage=a.ToggleSelectedImage.bind(Object(h.a)(a)),a.ToggleUnselectedImage=a.ToggleUnselectedImage.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"ToggleFavoriteImage",value:function(e){this.props.updateFavoriteImageId(0)}},{key:"ToggleSelectedImage",value:function(e){var t=this.props.selectedImageIds.filter((function(t,a,n){return t!==e}));t.push(this.props.favoriteImageId),this.props.updateFavoriteImageId(e),this.props.updateSelectedImageIds(t)}},{key:"ToggleUnselectedImage",value:function(e){var t=this.props.selectedImageIds;t.push(e),this.props.updateSelectedImageIds(t)}},{key:"componentDidMount",value:function(){var e=this;console.log("Fetching album data"),E("/backend/database/album",{email:this.props.api.email,api_key:this.props.api.api_key}).then((function(t){console.log("Fetching album data: successful");var a=JSON.parse(t);e.setState({albums:a.albums,albumIdtoIndex:a.album_id_to_index,albumIdtoNameDict:a.album_id_to_name,albumId:a.albums[0].id})})).catch((function(){console.log("Fetching album data: failed"),e.setState({loading:!1})}))}},{key:"getImageList",value:function(e){var t=this,a=this.props.classes;if(0===e.images.length)return i.a.createElement(B.a,{variant:"h6",className:a.headline},"No images ...");var n=e.images.map((function(e,a){var n,r=t.props.favoriteImageId===e.id,s=t.props.selectedImageIds.includes(e.id);return n=r?function(){return t.ToggleFavoriteImage(e.id)}:s?function(){return t.ToggleSelectedImage(e.id)}:function(){return t.ToggleUnselectedImage(e.id)},i.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:a},i.a.createElement(ba,{image:e,index:a,favorite:r,selected:s,onClick:n}))}));return i.a.createElement(ne.a,{container:!0,spacing:2},n)}},{key:"render",value:function(){var e=this,t=this.props.classes;return void 0===this.state.albums?i.a.createElement(Je.a,{className:t.linearProgress,color:"secondary"}):0===this.state.albums.length?i.a.createElement(B.a,{variant:"h6"},"No images found ..."):i.a.createElement(i.a.Fragment,null,i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},i.a.createElement(ne.a,{item:!0},i.a.createElement(_t,{label:"Album",value:this.state.albumId,selectOptions:this.state.albumIdtoNameDict,onChange:function(t){return e.setState({albumId:t})},className:t.albumSelect}))),this.getImageList(this.state.albums[this.state.albumIdtoIndex[this.state.albumId]]))}}]),t}(i.a.Component),va=de()((function(e){return{headline:{display:"block",textAlign:"center"},linearProgress:{borderRadius:"2px"},albumSelect:{width:250,textAlign:"center",marginBottom:e.spacing(4)}}}))(fa),Ea=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={uploading:!1,delting:!1,deleteDialogOpen:!1,headline:void 0,content:void 0,timestamp:void 0,visible:void 0,author:void 0,selectedImageIds:void 0,favoriteImageId:void 0},a.articleId=a.props.match.params.articleId,a.getArticleForm=a.getArticleForm.bind(Object(h.a)(a)),a.headlineInputRef=i.a.createRef(),a.contentInputRef=i.a.createRef(),a.authorInputRef=i.a.createRef(),a.processUpload=a.processUpload.bind(Object(h.a)(a)),a.processDelete=a.processDelete.bind(Object(h.a)(a)),a.getArticleForm=a.getArticleForm.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"processUpload",value:function(){var e=this;console.log("Saving Article"),this.setState({uploading:!0});var t={email:this.props.api.email,api_key:this.props.api.api_key,article_id:this.articleId};void 0!==this.state.headline&&(t.article_headline=this.state.headline),void 0!==this.state.content&&(t.article_content=this.state.content),void 0!==this.state.timestamp&&(t.article_timestamp=this.state.timestamp),void 0!==this.state.visible&&(t.article_visible=this.state.visible),void 0!==this.state.author&&(t.article_author=this.state.author),void 0!==this.state.selectedImageIds&&(t.article_selected_image_ids=this.state.selectedImageIds),void 0!==this.state.favoriteImageId&&(t.article_favorite_image_id=this.state.favoriteImageId),I("/backend/database/article",t,"PUT").then((function(t){var a=JSON.parse(t);console.log("Saving article: Status = "+a.Status),e.setState({uploading:!1})})).catch((function(){console.log("Saving article: failed"),e.setState({uploading:!1})}))}},{key:"processDelete",value:function(){var e=this;console.log("Removing Article"),this.setState({deleting:!0}),I("/backend/database/article",{email:this.props.api.email,api_key:this.props.api.api_key,article_id:this.articleId},"DELETE").then((function(e){var t=JSON.parse(e);console.log("Removing article: Status = "+t.Status),window.open("/admin/news-feed","_self")})).catch((function(){console.log("Removing article: failed"),e.setState({deleting:!1})}))}},{key:"getArticleForm",value:function(e){var t=this,a=this.props.classes,n=i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},i.a.createElement(ne.a,{item:!0,xs:12,className:a.gridItem},i.a.createElement(Dt,{fullWidth:!0,label:"Headline",className:a.headlineInput,value:void 0===this.state.headline?e.headline:this.state.headline,ref:this.headlineInputRef,onChange:function(e){return t.setState({headline:e})},onEnter:function(){return t.contentInputRef.current.focus()},onTab:function(){return t.contentInputRef.current.focus()},onEscape:function(){return t.headlineInputRef.current.blur()}})),i.a.createElement(ne.a,{item:!0,xs:12,className:a.gridItem},i.a.createElement(Dt,{fullWidth:!0,label:"Content",multiline:!0,rowsMax:"12",className:a.contentInput,value:void 0===this.state.content?e.content_markdown:this.state.content,ref:this.contentInputRef,onChange:function(e){return t.setState({content:e})},onTab:function(){return null},onEscape:function(){return t.contentInputRef.current.blur()}})),i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(Ft,{timestamp:void 0===this.state.timestamp?e.timestamp:this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.datepicker})),i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(Lt,{timestamp:void 0===this.state.timestamp?e.timestamp:this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.timepicker})),i.a.createElement(ne.a,{item:!0,className:Object(re.a)(a.gridItem,a.visibilityBox)},i.a.createElement("div",{className:a.visibilityBox},1===(void 0===this.state.visible?e.visible:this.state.visible)&&i.a.createElement(ft.a,{onClick:function(){return t.setState({visible:0})},className:a.visibilityIcon}),0===(void 0===this.state.visible?e.visible:this.state.visible)&&i.a.createElement(Et.a,{onClick:function(){return t.setState({visible:1})},className:a.visibilityIcon}),i.a.createElement(B.a,{className:a.visibilityText,variant:"body1"},(void 0===this.state.visible?e.visible:this.state.visible)?"Currently Visible":"Currently Invisible"))),i.a.createElement(ne.a,{item:!0,className:a.gridItem},i.a.createElement(Dt,{fullWidth:!1,label:"Author",className:a.authorInput,value:void 0===this.state.author?e.author:this.state.author,ref:this.authorInputRef,onChange:function(e){return t.setState({author:e})},onEnter:function(){return t.authorInputRef.current.blur()},onTab:function(){return t.authorInputRef.current.blur()},onEscape:function(){return t.authorInputRef.current.blur()}})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{elevation:3,className:a.card},i.a.createElement(Ge.a,{className:a.cardContent},n)),i.a.createElement("div",{className:a.uploadButtonWrapper},i.a.createElement("div",{className:a.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.uploading?"default":"secondary",onClick:this.processUpload,className:a.button},"Save Post"),this.state.uploading&&i.a.createElement(qe.a,{size:24,className:a.buttonProgress,color:"secondary"}))),i.a.createElement("div",{className:a.uploadButtonWrapper},i.a.createElement("div",{className:a.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:(this.state.deleting,"default"),onClick:function(){return t.setState({deleteDialogOpen:!0})},className:a.button},"Remove Post"),this.state.deleting&&i.a.createElement(qe.a,{size:24,className:a.buttonProgress,color:"secondary"}))),this.state.deleteDialogOpen&&i.a.createElement(ct.a,{open:!0,"aria-labelledby":"alert-dialog-title"},i.a.createElement(mt.a,{id:"alert-dialog-title"},"Do you really want to delete this post?"),i.a.createElement(dt.a,null,i.a.createElement(x.a,{onClick:function(){return t.setState({deleteDialogOpen:!1})},color:"primary"},"Disagree"),i.a.createElement(x.a,{onClick:this.processDelete,color:"secondary",autoFocus:!0},"Agree"))))}},{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.props.getArticleFromId(this.articleId);e=void 0===n?i.a.createElement(B.a,{variant:"h4",className:a.headline},"Nothing here ..."):this.getArticleForm(n);var r=void 0===this.state.headline?n.headline:this.state.headline;0===r.length&&(r="No Title");var s=void 0===this.state.selectedImageIds?n.selected_image_ids:this.state.selectedImageIds,l=void 0===this.state.favoriteImageId?n.favorite_image_id:this.state.favoriteImageId;return i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement(N.b,{to:"/admin/news-feed",onClick:this.props.triggerReload},i.a.createElement(Ke.a,{className:a.backIcon,color:"secondary"}))),i.a.createElement(B.a,{variant:"h4",className:a.headline},r),i.a.createElement(A.a,{className:a.divider}),e,i.a.createElement(A.a,{className:a.divider}),i.a.createElement(va,{api:this.props.api,selectedImageIds:s,favoriteImageId:l,updateFavoriteImageId:function(e){return t.setState({favoriteImageId:e})},updateSelectedImageIds:function(e){return t.setState({selectedImageIds:e})}}))}}]),t}(i.a.Component),Ia=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2),minWidth:250},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},visibilityBox:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(1),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},authorInput:{width:250,marginLeft:e.spacing(2)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginTop:e.spacing(3),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},uploadButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}}))(Object(k.h)(Ea)),ya=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={uploading:!1,headline:"",content:"",timestamp:Math.round(Date.now()/1e3),visible:0,author:a.props.api.name},a.headlineInputRef=i.a.createRef(),a.contentInputRef=i.a.createRef(),a.authorInputRef=i.a.createRef(),a.processUpload=a.processUpload.bind(Object(h.a)(a)),a.getArticleForm=a.getArticleForm.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"processUpload",value:function(){var e=this;console.log("Saving Article"),this.setState({uploading:!0}),I("/backend/database/article",{email:this.props.api.email,api_key:this.props.api.api_key,article_headline:this.state.headline,article_content:this.state.content,article_timestamp:this.state.timestamp,article_visible:this.state.visible,article_author:this.state.author},"POST").then((function(t){var a=JSON.parse(t);console.log("Saving article: Status = "+a.Status),"Ok"===a.Status?window.open("/admin/news-feed/"+a.new_article_id,"_self"):e.setState({uploading:!1})})).catch((function(){console.log("Saving article: failed"),e.setState({uploading:!1})}))}},{key:"getArticleForm",value:function(){var e=this,t=this.props.classes,a=i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},i.a.createElement(ne.a,{item:!0,xs:12,className:t.gridItem},i.a.createElement(Dt,{fullWidth:!0,label:"Headline",className:t.headlineInput,value:this.state.headline,ref:this.headlineInputRef,onChange:function(t){return e.setState({headline:t})},onEnter:function(){return e.contentInputRef.current.focus()},onTab:function(){return e.contentInputRef.current.focus()},onEscape:function(){return e.headlineInputRef.current.blur()}})),i.a.createElement(ne.a,{item:!0,xs:12,className:t.gridItem},i.a.createElement(Dt,{fullWidth:!0,label:"Content",multiline:!0,rowsMax:"12",className:t.contentInput,value:this.state.content,ref:this.contentInputRef,onChange:function(t){return e.setState({content:t})},onTab:function(){return null},onEscape:function(){return e.contentInputRef.current.blur()}})),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(Ft,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.datepicker})),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(Lt,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.timepicker})),i.a.createElement(ne.a,{item:!0,className:Object(re.a)(t.gridItem,t.visibilityBox)},i.a.createElement("div",{className:t.visibilityBox},1===this.state.visible&&i.a.createElement(ft.a,{onClick:function(){return e.setState({visible:0})},className:t.visibilityIcon}),0===this.state.visible&&i.a.createElement(Et.a,{onClick:function(){return e.setState({visible:1})},className:t.visibilityIcon}),i.a.createElement(B.a,{className:t.visibilityText,variant:"body1"},this.state.visible?"Currently Visible":"Currently Invisible"))),i.a.createElement(ne.a,{item:!0,className:t.gridItem},i.a.createElement(Dt,{fullWidth:!1,label:"Author",className:t.authorInput,value:this.state.author,ref:this.authorInputRef,onChange:function(t){return e.setState({author:t})},onEnter:function(){return e.authorInputRef.current.blur()},onTab:function(){return e.authorInputRef.current.blur()},onEscape:function(){return e.authorInputRef.current.blur()}})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{elevation:3,className:t.card},i.a.createElement(Ge.a,{className:t.cardContent},a)),i.a.createElement("div",{className:t.uploadButtonWrapper},i.a.createElement("div",{className:t.buttonSpinnerWrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.uploading?"default":"secondary",onClick:this.processUpload,className:t.button},"Save Post"),this.state.uploading&&i.a.createElement(qe.a,{size:24,className:t.buttonProgress,color:"secondary"}))))}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"AdminGalleryPage"},i.a.createElement(m.a,{medium:!0,up:!0},i.a.createElement(N.b,{to:"/admin/news-feed",onClick:this.props.triggerReload},i.a.createElement(Ke.a,{className:e.backIcon,color:"secondary"}))),i.a.createElement(B.a,{variant:"h4",className:e.headline},"New Post"),i.a.createElement(A.a,{className:e.divider}),this.getArticleForm())}}]),t}(i.a.Component),Na=de()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2),minWidth:250},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},visibilityBox:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(1),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},authorInput:{width:250,marginLeft:e.spacing(2)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginTop:e.spacing(3),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},uploadButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}}))(ya),ka=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,articles:[],articleIdtoIndex:{}},a.triggerReload=a.triggerReload.bind(Object(h.a)(a)),a.getArticleList=a.getArticleList.bind(Object(h.a)(a)),a.getArticleFromId=a.getArticleFromId.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.triggerReload()}},{key:"triggerReload",value:function(){var e=this;this.setState({loading:!0}),console.log("Fetching article data"),E("/backend/database/article",{email:this.props.api.email,api_key:this.props.api.api_key}).then((function(t){console.log("Fetching article data: successful"),e.setState({loading:!1,articles:JSON.parse(t).articles,articleIdtoIndex:JSON.parse(t).article_id_to_index})})).catch((function(){console.log("Fetching article data: failed"),e.setState({loading:!1})}))}},{key:"getArticleList",value:function(){var e=this.props.classes,t=this.state.articles.map((function(t,a){var n;return n=0===t.images.length?"https://wallpaperaccess.com/full/25637.jpg":t.images[0].filepath_medium,i.a.createElement(ne.a,{item:!0,xs:12,key:a},i.a.createElement(N.b,{to:"/admin/news-feed/"+t.id},i.a.createElement(c.Breakpoint,{small:!0,down:!0},i.a.createElement(ie.a,{elevation:3},i.a.createElement(ze.a,{className:e.cardImageTop,image:n}),i.a.createElement("div",{className:e.cardContentBottom},i.a.createElement("div",{className:e.cardContentOverlay}),i.a.createElement(Ge.a,{className:e.cardContent},i.a.createElement(B.a,{component:"h5",variant:"h5"},t.headline),i.a.createElement(B.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain))))),i.a.createElement(c.Breakpoint,{medium:!0,up:!0},i.a.createElement(ie.a,{className:e.card,elevation:3},i.a.createElement(ze.a,{className:e.cardImageLeft,image:n}),i.a.createElement("div",{className:e.cardContentRight},i.a.createElement("div",{className:e.cardContentOverlay}),i.a.createElement(Ge.a,{className:e.cardContent},i.a.createElement(B.a,{component:"h5",variant:"h5"},t.headline),i.a.createElement(B.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain)))))))}));return i.a.createElement(ne.a,{container:!0,spacing:2},t)}},{key:"getArticleFromId",value:function(e){return this.state.articles[this.state.articleIdtoIndex[e]]}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,path:"/admin/news-feed"},i.a.createElement("div",{className:"NewsFeedPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"News Feed"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),!this.state.loading&&i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.buttonRow},i.a.createElement("div",{className:e.buttonSpinnerWrapper},i.a.createElement(N.b,{to:"/admin/news-feed/new"},i.a.createElement(x.a,{variant:"contained",color:"secondary",className:e.button},"Add Post")))),i.a.createElement(A.a,{className:e.divider}),this.getArticleList()))),i.a.createElement(k.b,{exact:!0,path:"/admin/news-feed/new"},this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:e.headline},"News Feed"),i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&i.a.createElement(Na,{api:this.props.api})),i.a.createElement(k.b,{path:"/admin/news-feed/:articleId"},this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{variant:"h4",className:e.headline},"News Feed"),i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&i.a.createElement(Ia,{api:this.props.api,getArticleFromId:this.getArticleFromId,triggerReload:this.triggerReload})))}}]),t}(i.a.Component),xa=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},buttonRow:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},card:{display:"flex",cursor:"pointer"},cardContentRight:{position:"relative",height:e.spacing(16),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"calc(100% - ".concat(e.spacing(32),"px)")},cardContentBottom:{position:"relative",maxHeight:e.spacing(18),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),margin:0,"&:last-child":{paddingBottom:e.spacing(2)}},cardContentOverlay:{position:"absolute",left:0,bottom:"-1px",width:"100%",height:e.spacing(4),background:"linear-gradient(0deg, rgba(255,255,255,1.0), rgba(255,255,255,0.0))"},cardImageLeft:{height:e.spacing(18),width:e.spacing(32)},cardImageTop:{height:0,paddingTop:"56.25%"}}}))(ka),Sa=(a(142),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={deleteDialogOpen:!1},a.roleInputRef=i.a.createRef(),a.nameInputRef=i.a.createRef(),a.emailInputRef=i.a.createRef(),a.pushCurrentVersion=a.pushCurrentVersion.bind(Object(h.a)(a)),a.toggleVisibility=a.toggleVisibility.bind(Object(h.a)(a)),a.triggerRemove=a.triggerRemove.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"pushCurrentVersion",value:function(){I("/backend/database/contact",{email:this.props.api.email,api_key:this.props.api.api_key,contact_id:this.props.contact.id,contact_role:this.props.contact.role,contact_name:this.props.contact.name,contact_email:this.props.contact.email,contact_visible:this.props.contact.visible},"PUT").then((function(e){console.log("Pushing current version: Status = "+e)})).catch((function(e){console.log("Pushing current version: Failed")}))}},{key:"toggleVisibility",value:function(){var e,t=this;e=1===this.props.contact.visible?0:1;var a={role:this.props.contact.role,name:this.props.contact.name,email:this.props.contact.email,visible:e,id:this.props.contact.id};this.props.updateState(this.props.index,a),setTimeout((function(){t.pushCurrentVersion()}),.05)}},{key:"triggerRemove",value:function(){var e=this;I("/backend/database/contact",{email:this.props.api.email,api_key:this.props.api.api_key,contact_id:this.props.contact.id},"DELETE").then((function(t){e.setState({deleteDialogOpen:!1}),e.props.removeContactFromView(e.props.index)})).catch((function(t){e.setState({deleteDialogOpen:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement(ie.a,{className:Object(re.a)(t.paper,1===this.props.contact.visible?"":t.invisiblePaper),elevation:3},i.a.createElement("div",{className:Object(re.a)(t.iconInputBox,t.textFieldMarginBottom)},i.a.createElement($t.a,{className:t.lineIcon}),i.a.createElement(Dt,{fullWidth:!0,label:"Role",className:t.textField,value:this.props.contact.role,ref:this.roleInputRef,onChange:function(t){return e.props.updateState(e.props.index,{role:t})},onEnter:function(){return e.nameInputRef.current.focus()},onTab:function(){return e.nameInputRef.current.focus()},onEscape:function(){return e.roleInputRef.current.blur()},onBlur:function(){return e.pushCurrentVersion()}})),i.a.createElement("div",{className:Object(re.a)(t.iconInputBox,t.textFieldMarginTop,t.textFieldMarginBottom)},i.a.createElement(Zt.a,{className:t.lineIcon}),i.a.createElement(Dt,{fullWidth:!0,label:"Name",className:t.textField,value:this.props.contact.name,ref:this.nameInputRef,onChange:function(t){return e.props.updateState(e.props.index,{name:t})},onEnter:function(){return e.emailInputRef.current.focus()},onTab:function(){return e.emailInputRef.current.focus()},onEscape:function(){return e.nameInputRef.current.blur()},onBlur:function(){return e.pushCurrentVersion()}})),i.a.createElement("div",{className:Object(re.a)(t.iconInputBox,t.textFieldMarginTop,t.textFieldMarginBottom)},i.a.createElement(ta.a,{className:t.lineIcon}),i.a.createElement(Dt,{fullWidth:!0,label:"Email",className:t.textField,value:this.props.contact.email,ref:this.emailInputRef,onChange:function(t){return e.props.updateState(e.props.index,{email:t})},onEnter:function(){return e.emailInputRef.current.blur()},onTab:function(){return e.emailInputRef.current.blur()},onEscape:function(){return e.emailInputRef.current.blur()},onBlur:function(){return e.pushCurrentVersion()}})),i.a.createElement(A.a,null),i.a.createElement("div",{className:t.visibilityBox},1===this.props.contact.visible&&i.a.createElement(ft.a,{onClick:this.toggleVisibility,className:t.visibilityIcon}),0===this.props.contact.visible&&i.a.createElement(Et.a,{onClick:this.toggleVisibility,className:t.visibilityIcon}),i.a.createElement(B.a,{className:t.visibilityText,variant:"body1"},this.props.contact.visible?"Currently Visible":"Currently Invisible")),i.a.createElement(gt.a,{className:t.removeIcon,onClick:function(){return e.setState({deleteDialogOpen:!0})}}),this.state.deleteDialogOpen&&i.a.createElement(ct.a,{open:!0,"aria-labelledby":"alert-dialog-title"},i.a.createElement(mt.a,{id:"alert-dialog-title"},"Do you really want to delete this contact?"),i.a.createElement(dt.a,null,i.a.createElement(x.a,{onClick:function(){return e.setState({deleteDialogOpen:!1})},color:"primary"},"Disagree"),i.a.createElement(x.a,{onClick:this.triggerRemove,color:"secondary",autoFocus:!0},"Agree"))))}}]),t}(i.a.Component)),Ca=de()((function(e){return{paper:{position:"relative",padding:e.spacing(2),minWidth:300},invisiblePaper:{backgroundColor:"rgb(230, 230, 230)"},textField:{display:"inline-flex"},textFieldMarginTop:{marginTop:e.spacing(2)},textFieldMarginBottom:{marginBottom:e.spacing(2)},lineIcon:{position:"relative",marginRight:e.spacing(2),marginBottom:e.spacing(.5),alignSelf:"flex-end"},iconInputBox:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row"},visibilityBox:{display:"flex",justifyContent:"left",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(2),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},removeIcon:{cursor:"pointer",position:"absolute",right:e.spacing(2),bottom:e.spacing(2)}}}))(Sa),wa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,contacts:[],creatingContact:!1},a.updateState=a.updateState.bind(Object(h.a)(a)),a.removeContactFromView=a.removeContactFromView.bind(Object(h.a)(a)),a.createContact=a.createContact.bind(Object(h.a)(a)),a.getContactList=a.getContactList.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Fetching contact data"),E("/backend/database/contact",{email:this.props.api.email,api_key:this.props.api.api_key}).then((function(t){console.log("Fetching contact data: successful"),e.setState({loading:!1,contacts:JSON.parse(t).contacts})})).catch((function(){console.log("Fetching contact data: failed"),e.setState({loading:!1})}))}},{key:"updateState",value:function(e,t){var a=this.state.contacts;Object.assign(a[e],t),this.setState({contacts:a})}},{key:"removeContactFromView",value:function(e){for(var t=[],a=0;a<this.state.contacts.length;a++)a!==e&&t.push(this.state.contacts[a]);this.setState({contacts:t})}},{key:"createContact",value:function(){var e=this;console.log("Creating new contact"),this.setState({creatingContact:!0}),I("/backend/database/contact",{email:this.props.api.email,api_key:this.props.api.api_key},"POST").then((function(t){console.log("Creating new contact: Status = "+t);var a={role:"",name:"",email:"",visible:0,id:JSON.parse(t).new_contact_id},n=e.state.contacts;n.push(a),e.setState({creatingContact:!1,contacts:n})})).catch((function(){console.log("Creating new contact: failed"),e.setState({creatingContact:!1})}))}},{key:"getContactList",value:function(){var e=this,t=this.state.contacts.map((function(t,a){return i.a.createElement(ne.a,{item:!0,xs:12,sm:6,key:a},i.a.createElement(Ca,{api:e.props.api,contact:t,index:a,updateState:e.updateState,removeContactFromView:e.removeContactFromView}))}));return i.a.createElement(ne.a,{container:!0,spacing:2,justify:"center"},t)}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:"AdminContactUsPage"},i.a.createElement(B.a,{variant:"h4",className:e.headline},"Contact Us"),this.state.loading&&i.a.createElement(Je.a,{className:e.linearProgress,color:"secondary"}),i.a.createElement("div",{className:e.root},!this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:e.wrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.creatingContact?"default":"secondary",onClick:this.createContact,className:e.button},"Add Contact"),this.state.creatingContact&&i.a.createElement(qe.a,{size:24,className:e.buttonProgress,color:"secondary"})),i.a.createElement(A.a,{className:e.divider}),this.getContactList())))}}]),t}(i.a.Component),Oa=de()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},root:{flexGrow:1},wrapper:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},button:{color:"white"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}))(wa),ja=function(e){var t=Object(k.g)();if(e.path.startsWith("/admin")){if(e.automaticLogin)return i.a.createElement(ae.a,{className:"ContentPage",maxWidth:"md"});e.loggedIn||t.push("/event")}return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.d,null,i.a.createElement(k.b,{path:"/event"},i.a.createElement(Ue,null)),i.a.createElement(k.b,null,i.a.createElement(ae.a,{className:"ContentPage",maxWidth:"md"},i.a.createElement(k.b,{path:"/news-feed"},i.a.createElement(nt,{hideWebsite:e.hideWebsite})),i.a.createElement(k.b,{path:"/gallery"},i.a.createElement(lt,{hideWebsite:e.hideWebsite})),i.a.createElement(k.b,{path:"/sailors-guide"},i.a.createElement(Xt,null)),i.a.createElement(k.b,{path:"/contact-us"},i.a.createElement(ua,null)),i.a.createElement(k.b,{path:"/admin/news-feed"},i.a.createElement(xa,{api:e.api})),i.a.createElement(k.b,{path:"/admin/gallery"},i.a.createElement(Kt,{api:e.api})),i.a.createElement(k.b,{path:"/admin/contact-us"},i.a.createElement(Oa,{api:e.api}))))))},_a=Object(j.a)((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100vw",height:"100vh"},headline:{paddingBottom:e.spacing(3)}}}));function Ra(){var e=_a();return i.a.createElement("div",{className:Object(re.a)(e.container,"NotFoundPage")},i.a.createElement(B.a,{variant:"h4",className:e.headline},"404: Page not found ..."),i.a.createElement(N.b,{to:"/"},i.a.createElement(x.a,{variant:"contained",color:"secondary"},"Get back to main page")))}a(228);var Ta=a(283),Ba=a(275),Fa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,email:"",password:"",errorMessageVisible:!1,errorMessageText:""},a.emailInputRef=i.a.createRef(),a.passwordInputRef=i.a.createRef(),a.processLogin=a.processLogin.bind(Object(h.a)(a)),a.handleEmailKeyDown=a.handleEmailKeyDown.bind(Object(h.a)(a)),a.handlePasswordKeyDown=a.handlePasswordKeyDown.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"processLogin",value:function(){var e=this;console.log("Trying to log in"),this.setState({loading:!0});var t={email:this.state.email,password:this.state.password};I("/backend/login",t,"POST").then((function(a){var n=JSON.parse(a);"Ok"===n.Status?(console.log("Login: Status = "+a),e.setState({loading:!1,successMessageVisible:!0,successMessageText:"Login successful!"}),setTimeout((function(){e.props.loginUser(t.email,n.api_key,n.name)}),.7)):(console.log("Login failed: Status = "+a),e.setState({loading:!1,errorMessageVisible:!0,errorMessageText:n.Status}))})).catch((function(t){console.log("Login failed: "+t);var a=JSON.parse(t);e.setState({loading:!1,errorMessageVisible:!0,errorMessageText:a.Status})}))}},{key:"handleEmailKeyDown",value:function(e){this.setState({errorMessageVisible:!1}),13!==e.which&&9!==e.which||(e.preventDefault(),this.emailInputRef.current.blur(),this.passwordInputRef.current.focus())}},{key:"handlePasswordKeyDown",value:function(e){this.setState({errorMessageVisible:!1}),13===e.which?(this.passwordInputRef.current.blur(),this.processLogin()):9===e.which&&(e.preventDefault(),this.passwordInputRef.current.blur(),this.emailInputRef.current.focus())}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement("div",{className:"LoginPage"},i.a.createElement(ae.a,{maxWidth:"xs"},i.a.createElement(B.a,{variant:"h3",className:t.title},"Login"),i.a.createElement(ot.a,{required:!0,fullWidth:!0,id:"email-input",label:"Email",variant:"outlined",value:this.state.email,inputRef:this.emailInputRef,onChange:function(t){return e.setState({email:t.target.value})},onKeyDown:this.handleEmailKeyDown,className:t.textField}),i.a.createElement(ot.a,{required:!0,fullWidth:!0,type:"password",id:"password-input",label:"Password",variant:"outlined",value:this.state.password,inputRef:this.passwordInputRef,onChange:function(t){return e.setState({password:t.target.value})},onKeyDown:this.handlePasswordKeyDown,className:t.textField}),i.a.createElement("div",{className:"ButtonBox"},i.a.createElement("div",{className:t.wrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.loading?"default":"secondary",className:t.button},i.a.createElement(N.b,{to:"/event",className:t.link},"Cancel"))),i.a.createElement("div",{className:t.wrapper},i.a.createElement(x.a,{variant:"contained",color:this.state.loading?"default":"secondary",onClick:this.processLogin,className:t.button},"login"),this.state.loading&&i.a.createElement(qe.a,{size:24,className:t.buttonProgress,color:"secondary"}))),this.state.errorMessageVisible&&i.a.createElement(Ta.a,{className:t.snackbar,open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement(Ba.a,{className:t.snackbarContentError,"aria-describedby":"message-id",message:i.a.createElement("span",{id:"message-id"},this.state.errorMessageText)})),this.state.successMessageVisible&&i.a.createElement(Ta.a,{className:t.snackbar,open:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement(Ba.a,{className:t.snackbarContentSuccess,"aria-describedby":"message-id",message:i.a.createElement("span",{id:"message-id"},this.state.successMessageText)}))))}}]),t}(i.a.Component),Aa=Object(k.h)(de()((function(e){return{title:{display:"block",textAlign:"center",marginBottom:e.spacing(2)},link:{textDecoration:"none",display:"block"},button:{color:"white"},textField:{display:"block",marginBottom:e.spacing(1)},wrapper:{marginTop:e.spacing(1),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},snackbar:{margin:e.spacing(1)},snackbarContentError:{backgroundColor:e.palette.primary.main},snackbarContentSuccess:{backgroundColor:e.palette.secondary.main}}}))(Fa)),La=["/event","/news-feed","/gallery","/sailors-guide","/contact-us"],Da=["/event","/(news-feed|news-feed/:articleId)","/(gallery|gallery/:albumId)","/sailors-guide","/contact-us"],Pa=["/admin/news-feed","/admin/news-feed","/admin/gallery","/admin/gallery","/admin/gallery","/admin/contact-us"],Wa=["/admin/(news-feed|news-feed/:articleId)","/admin/(gallery|gallery/:albumId|gallery/:albumId/:imageId)","/admin/contact-us"],Ma=function(e){var t="/(",a=i.a.useState(!1),n=Object(y.a)(a,2),r=n[0],s=n[1];return La.forEach((function(e){t+=e.slice(1)+"|"})),e.loggedIn&&Pa.forEach((function(e){t+=e.slice(1)+"|"})),t=t.slice(0,-1)+")",i.a.createElement(N.a,null,i.a.createElement(k.b,{path:t},!r&&i.a.createElement(Z,{loggedIn:e.loggedIn,logoutUser:e.logoutUser})),i.a.createElement(k.d,null,i.a.createElement(k.b,{exact:!0,strict:!0,path:"/"},i.a.createElement(w,null)),i.a.createElement(k.b,{exact:!0,strict:!0,path:"/login"},e.loggedIn&&i.a.createElement(k.a,{to:"/admin/news-feed"}),!e.loggedIn&&i.a.createElement(Aa,{loggedIn:e.loggedIn,loginUser:function(t,a){return e.loginUser(t,a)}})),Da.map((function(t,a){return i.a.createElement(k.b,{path:t,key:a},i.a.createElement(ja,{loggedIn:e.loggedIn,path:t,hideWebsite:s}))})),Wa.map((function(t,a){return i.a.createElement(k.b,{path:t,key:a},i.a.createElement(ja,{automaticLogin:e.automaticLogin,loggedIn:e.loggedIn,path:t,api:e.api}))})),i.a.createElement(k.b,null,i.a.createElement(Ra,null))),i.a.createElement(k.b,{path:t},!r&&i.a.createElement(le,null)))},Va=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(u.a)(t).call(this,e))).state={loggedIn:!1,automaticLogin:!0,api:{email:v.a.get("email"),api_key:v.a.get("api_key")}},a.loginUser=a.loginUser.bind(Object(h.a)(a)),a.logoutUser=a.logoutUser.bind(Object(h.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Trying to log in automatically ...");var t={email:v.a.get("email"),api_key:v.a.get("api_key")};I("/backend/login",t,"POST").then((function(a){var n=JSON.parse(a);"Ok"===n.Status?(console.log("Automatic login: Status = "+a),e.loginUser(t.email,n.api_key,n.name)):(console.log("Automatic login: failed"),e.setState({automaticLogin:!1}),v.a.remove("email"),v.a.remove("api_key"))})).catch((function(){console.log("Automatic login: failed"),e.setState({automaticLogin:!1}),v.a.remove("email"),v.a.remove("api_key")}))}},{key:"loginUser",value:function(e,t,a){v.a.set("email",e,{expires:7}),v.a.set("api_key",t,{expires:7}),this.setState({loggedIn:!0,automaticLogin:!1,api:{email:e,api_key:t,name:a}}),v.a.set("email",e,{expires:7}),v.a.set("api_key",t,{expires:7})}},{key:"logoutUser",value:function(){var e=this;I("/backend/logout",{email:this.state.api.email,api_key:this.state.api.api_key},"POST").then((function(){console.log("Logout: Status = Ok"),e.setState({loggedIn:!1,api:{email:"none",api_key:"none",name:"none"}})})).catch((function(e){console.log("Logout Failed: "+e)})),v.a.remove("email"),v.a.remove("api_key")}},{key:"render",value:function(){var e=this;return i.a.createElement(Ma,{automaticLogin:this.state.automaticLogin,loggedIn:this.state.loggedIn,loginUser:function(t,a){return e.loginUser(t,a)},logoutUser:this.logoutUser,api:this.state.api})}}]),t}(i.a.Component),Ua=Object(l.a)({palette:{primary:{main:"hsl(229, 25%, 18%)",transparent80:"rgba(40, 44, 52, 0.8)"},secondary:{main:"hsl(344, 93%, 50%)",transparent80:"hsla(340, 100%, 50%, 0.8)"},white:{main:"rgb(255, 255, 255)",transparent80:"rgba(255, 255, 255, 0.8)",transparent60:"rgba(255, 255, 255, 0.6)"},maastrichtBlue:{main:"hsl(237, 77%, 18%)",transparent80:"hsla(237, 77%, 18%, 0.8)",transparent60:"hsla(237, 77%, 18%, 0.6)"},pinctonBlue:{main:"hsl(206, 81%, 50%)",transparent80:"hsla(206, 81%, 50%, 0.8)",transparent60:"hsla(206, 81%, 50%, 0.6)"},desireMagenta:{main:"hsl(344, 93%, 50%)",transparent80:"hsla(344, 93%, 50%, 0.8)",transparent60:"hsla(344, 93%, 50%, 0.6)"},gunmetalGray:{main:"hsl(229, 25%, 18%)",transparent80:"hsla(229, 25%, 18%, 0.8)",transparent60:"hsla(229, 25%, 18%, 0.6)"}}}),za=function(){return i.a.createElement(o.a,{theme:Ua},i.a.createElement(c.BreakpointProvider,null,i.a.createElement(Va,null)))};s.a.render(i.a.createElement((function(){return i.a.createElement(za,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[185,1,2]]]);
//# sourceMappingURL=main.d95d0d43.chunk.js.map