(this.webpackJsonpreact_frontend=this.webpackJsonpreact_frontend||[]).push([[12],{195:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(43),n=a(0),s=a.n(n),r=a(318),l=s.a.forwardRef((function(e,t){var a=s.a.useState("value"in e?e.value:""),n=Object(i.a)(a,2),l=n[0],o=n[1];return s.a.createElement(r.a,{fullWidth:"fullWidth"in e&&e.fullWidth,className:"className"in e?e.className:"",disabled:"disabled"in e&&e.disabled,multiline:"multiline"in e&&e.multiline,rowsMax:"rowsMax"in e?e.rowsMax:"1",value:l,inputRef:t,onChange:function(t){o(t.target.value),"onChange"in e&&e.onChange(t.target.value)},onKeyDown:function(t){"onTab"in e&&9===t.which?(t.preventDefault(),e.onTab(t.target.value)):"onEnter"in e&&13===t.which?(t.preventDefault(),e.onEnter(t.target.value)):"onEscape"in e&&27===t.which&&(console.log("Triggering Escape"),t.preventDefault(),e.onEscape(t.target.value))},onBlur:function(t){"onBlur"in e&&e.onBlur(t.target.value)},label:e.label})}))},203:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(43),n=a(0),s=a.n(n),r=a(194),l=a(309),o=a(215),c=function(e){var t=s.a.useState(new Date(1e3*e.timestamp)),a=Object(i.a)(t,2),n=a[0],c=a[1];return s.a.createElement(r.a,{utils:o.a},s.a.createElement(l.a,{className:"className"in e?e.className:"",disabled:"disabled"in e&&e.disabled,margin:"normal",id:"date-picker",label:"Date",format:"dd/MM/yyyy",value:n,onChange:function(t){c(t),"updateTimestamp"in e&&e.updateTimestamp(Math.round(t.getTime()/1e3))},KeyboardButtonProps:{"aria-label":"change date"}}))}},206:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(43),n=a(0),s=a.n(n),r=a(194),l=a(324),o=a(215),c=function(e){var t=s.a.useState(new Date(1e3*e.timestamp)),a=Object(i.a)(t,2),n=a[0],c=a[1];return s.a.createElement(r.a,{utils:o.a},s.a.createElement(l.a,{className:"className"in e?e.className:"",disabled:"disabled"in e&&e.disabled,margin:"normal",id:"time-picker",label:"Time",value:n,onChange:function(t){c(t),"updateTimestamp"in e&&e.updateTimestamp(Math.round(t.getTime()/1e3))},KeyboardButtonProps:{"aria-label":"change time"}}))}},213:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(43),n=a(0),s=a.n(n),r=a(305),l=a(322),o=a(312),c=a(325),d=function(e){var t=s.a.useState(e.value),a=Object(i.a)(t,2),n=a[0],d=a[1];return s.a.createElement(r.a,{className:"className"in e?e.className:""},s.a.createElement(l.a,{id:"select-label"},e.label),s.a.createElement(o.a,{disabled:"disabled"in e&&e.disabled,labelId:"select-label",id:"demo-simple-select",value:n,onChange:function(t){d(t.target.value),"onChange"in e&&e.onChange(t.target.value)}},Object.keys(e.selectOptions).map((function(t,a){return s.a.createElement(c.a,{key:a,value:t},e.selectOptions[t])}))))}},267:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var i=a(37),n=a(38),s=a(41),r=a(39),l=a(34),o=a(40),c=a(0),d=a.n(c),m=a(12),p=a(26),u=(a(267),a(5)),g=a(54),h=a(55),f=a(183),v=a(224),b=a(225),I=a(182),E=a(180),N=a(184),y=a(178),S=a(172),k=a(44),x=a(2),O=a(268),T=a(270),C=a(269),j=a(246),w=a(192),R=a.n(w),_=a(207),F=a.n(_),B=a(208),A=a.n(B),W=a(203),P=a(206),D=a(195),L=a(74),M=a.n(L),U=a(213),J=a(247),z=a.n(J),H=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.props.favorite?d.a.createElement(f.a,{className:Object(x.a)(e.paper,e.favoritePaper),elevation:3,onClick:this.props.onClick},d.a.createElement(v.a,{className:Object(x.a)(e.cardMedia,e.borderMedia),image:this.props.image.filepath_medium,alt:this.props.image.description}),d.a.createElement(z.a,{className:Object(x.a)(e.cardIcon,e.favoriteIcon)})):this.props.selected?d.a.createElement(f.a,{className:Object(x.a)(e.paper,e.selectedPaper),elevation:3,onClick:this.props.onClick},d.a.createElement(v.a,{className:Object(x.a)(e.cardMedia,e.borderMedia),image:this.props.image.filepath_medium,alt:this.props.image.description})):d.a.createElement(f.a,{className:e.paper,elevation:3,onClick:this.props.onClick},d.a.createElement(v.a,{className:e.cardMedia,image:this.props.image.filepath_medium,alt:this.props.image.description}))}}]),t}(d.a.Component),K=M()((function(e){return{paper:{position:"relative",cursor:"pointer"},favoritePaper:{margin:"-3px",border:"3px solid",borderColor:e.palette.desireMagenta.transparent80},selectedPaper:{margin:"-3px",border:"3px solid",borderColor:e.palette.pinctonBlue.transparent80},cardMedia:{height:"auto",paddingTop:"66.666%",overflow:"visible"},cardIcon:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)},favoriteIcon:{color:e.palette.desireMagenta.transparent80}}}))(H),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).state={albums:void 0,albumId:void 0,albumIdtoIndex:void 0,albumIdtoNameDict:void 0},a.ToggleFavoriteImage=a.ToggleFavoriteImage.bind(Object(l.a)(a)),a.ToggleSelectedImage=a.ToggleSelectedImage.bind(Object(l.a)(a)),a.ToggleUnselectedImage=a.ToggleUnselectedImage.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"ToggleFavoriteImage",value:function(e){this.props.updateFavoriteImageId(0)}},{key:"ToggleSelectedImage",value:function(e){var t=this.props.selectedImageIds.filter((function(t,a,i){return t!==e}));t.push(this.props.favoriteImageId),this.props.updateFavoriteImageId(e),this.props.updateSelectedImageIds(t)}},{key:"ToggleUnselectedImage",value:function(e){var t=this.props.selectedImageIds;t.push(e),this.props.updateSelectedImageIds(t)}},{key:"componentDidMount",value:function(){var e=this;console.log("Fetching album data");var t={email:this.props.api.email,api_key:this.props.api.api_key};Object(g.a)(h.a+"/backend/database/album",t).then((function(t){console.log("Fetching album data: successful");var a=JSON.parse(t);e.setState({albums:a.albums,albumIdtoIndex:a.album_id_to_index,albumIdtoNameDict:a.album_id_to_name,albumId:a.albums[0].id})})).catch((function(){console.log("Fetching album data: failed"),e.setState({loading:!1})}))}},{key:"getImageList",value:function(e){var t=this,a=this.props.classes;if(0===e.images.length)return d.a.createElement(y.a,{variant:"h6",className:a.headline},"No images ...");var i=e.images.map((function(e,a){var i,n=t.props.favoriteImageId===e.id,s=t.props.selectedImageIds.includes(e.id);return i=n?function(){return t.ToggleFavoriteImage(e.id)}:s?function(){return t.ToggleSelectedImage(e.id)}:function(){return t.ToggleUnselectedImage(e.id)},d.a.createElement(I.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,key:a},d.a.createElement(K,{image:e,index:a,favorite:n,selected:s,onClick:i}))}));return d.a.createElement(I.a,{container:!0,spacing:2},i)}},{key:"render",value:function(){var e=this,t=this.props.classes;return void 0===this.state.albums?d.a.createElement(N.a,{className:t.linearProgress,color:"secondary"}):0===this.state.albums.length?d.a.createElement(y.a,{variant:"h6"},"No images found ..."):d.a.createElement(d.a.Fragment,null,d.a.createElement(I.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},d.a.createElement(I.a,{item:!0},d.a.createElement(U.a,{label:"Album",value:this.state.albumId,selectOptions:this.state.albumIdtoNameDict,onChange:function(t){return e.setState({albumId:t})},className:t.albumSelect}))),this.getImageList(this.state.albums[this.state.albumIdtoIndex[this.state.albumId]]))}}]),t}(d.a.Component),q=M()((function(e){return{headline:{display:"block",textAlign:"center"},linearProgress:{borderRadius:"2px"},albumSelect:{width:250,textAlign:"center",marginBottom:e.spacing(4)}}}))(V),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).state={uploading:!1,deleting:!1,deleteDialogOpen:!1,headline:void 0,content:void 0,timestamp:void 0,visible:void 0,author:void 0,selectedImageIds:void 0,favoriteImageId:void 0},a.articleId=a.props.match.params.articleId,a.getArticleForm=a.getArticleForm.bind(Object(l.a)(a)),a.headlineInputRef=d.a.createRef(),a.contentInputRef=d.a.createRef(),a.authorInputRef=d.a.createRef(),a.processUpload=a.processUpload.bind(Object(l.a)(a)),a.processDelete=a.processDelete.bind(Object(l.a)(a)),a.getArticleForm=a.getArticleForm.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"processUpload",value:function(){var e=this;console.log("Saving Article"),this.setState({uploading:!0});var t={email:this.props.api.email,api_key:this.props.api.api_key,article_id:this.articleId};void 0!==this.state.headline&&(t.article_headline=this.state.headline),void 0!==this.state.content&&(t.article_content=this.state.content),void 0!==this.state.timestamp&&(t.article_timestamp=this.state.timestamp),void 0!==this.state.visible&&(t.article_visible=this.state.visible),void 0!==this.state.author&&(t.article_author=this.state.author),void 0!==this.state.selectedImageIds&&(t.article_selected_image_ids=this.state.selectedImageIds),void 0!==this.state.favoriteImageId&&(t.article_favorite_image_id=this.state.favoriteImageId),Object(g.c)(h.a+"/backend/database/article",t,"PUT").then((function(t){var a=JSON.parse(t);console.log("Saving article: Status = "+a.Status),setTimeout((function(){e.setState({uploading:!1})}),1e3)})).catch((function(){console.log("Saving article: failed"),setTimeout((function(){e.setState({uploading:!1})}),1e3)}))}},{key:"processDelete",value:function(){var e=this;console.log("Removing Article"),this.setState({deleting:!0});var t={email:this.props.api.email,api_key:this.props.api.api_key,article_id:this.articleId};Object(g.c)(h.a+"/backend/database/article",t,"DELETE").then((function(e){var t=JSON.parse(e);console.log("Removing article: Status = "+t.Status),setTimeout((function(){k.animateScroll.scrollToTop({duration:300}),window.open("/admin/news-feed","_self")}),1e3)})).catch((function(){console.log("Removing article: failed"),setTimeout((function(){e.setState({deleting:!1})}),1e3)}))}},{key:"getArticleForm",value:function(e){var t=this,a=this.props.classes,i=d.a.createElement(I.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},d.a.createElement(I.a,{item:!0,xs:12,className:a.gridItem},d.a.createElement(D.a,{fullWidth:!0,label:"Headline",className:a.headlineInput,value:void 0===this.state.headline?e.headline:this.state.headline,ref:this.headlineInputRef,onChange:function(e){return t.setState({headline:e})},onEnter:function(){return t.contentInputRef.current.focus()},onTab:function(){return t.contentInputRef.current.focus()},onEscape:function(){return t.headlineInputRef.current.blur()}})),d.a.createElement(I.a,{item:!0,xs:12,className:a.gridItem},d.a.createElement(D.a,{fullWidth:!0,label:"Content",multiline:!0,rowsMax:"12",className:a.contentInput,value:void 0===this.state.content?e.content_markdown:this.state.content,ref:this.contentInputRef,onChange:function(e){return t.setState({content:e})},onTab:function(){return null},onEscape:function(){return t.contentInputRef.current.blur()}})),d.a.createElement(I.a,{item:!0,className:a.gridItem},d.a.createElement(W.a,{timestamp:void 0===this.state.timestamp?e.timestamp:this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.datepicker})),d.a.createElement(I.a,{item:!0,className:a.gridItem},d.a.createElement(P.a,{timestamp:void 0===this.state.timestamp?e.timestamp:this.state.timestamp,updateTimestamp:function(e){return t.setState({timestamp:e})},className:a.timepicker})),d.a.createElement(I.a,{item:!0,className:Object(x.a)(a.gridItem,a.visibilityBox)},d.a.createElement("div",{className:a.visibilityBox},1===(void 0===this.state.visible?e.visible:this.state.visible)&&d.a.createElement(F.a,{onClick:function(){return t.setState({visible:0})},className:a.visibilityIcon}),0===(void 0===this.state.visible?e.visible:this.state.visible)&&d.a.createElement(A.a,{onClick:function(){return t.setState({visible:1})},className:a.visibilityIcon}),d.a.createElement(y.a,{className:a.visibilityText,variant:"body1"},(void 0===this.state.visible?e.visible:this.state.visible)?"Currently Visible":"Currently Invisible"))),d.a.createElement(I.a,{item:!0,className:a.gridItem},d.a.createElement(D.a,{fullWidth:!1,label:"Author",className:a.authorInput,value:void 0===this.state.author?e.author:this.state.author,ref:this.authorInputRef,onChange:function(e){return t.setState({author:e})},onEnter:function(){return t.authorInputRef.current.blur()},onTab:function(){return t.authorInputRef.current.blur()},onEscape:function(){return t.authorInputRef.current.blur()}})));return d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{elevation:3,className:a.card},d.a.createElement(b.a,{className:a.cardContent},i)),d.a.createElement("div",{className:a.uploadButtonWrapper},d.a.createElement("div",{className:a.buttonSpinnerWrapper},d.a.createElement(S.a,{variant:"contained",disabled:this.state.uploading,color:"secondary",onClick:this.processUpload,className:a.button},"Save Post"),this.state.uploading&&d.a.createElement(j.a,{size:24,className:a.buttonProgress,color:"secondary"}))),d.a.createElement("div",{className:a.uploadButtonWrapper},d.a.createElement(S.a,{variant:"contained",color:"default",disabled:this.state.uploading,onClick:function(){return t.setState({deleteDialogOpen:!0})},className:a.button},"Remove Post")),this.state.deleteDialogOpen&&d.a.createElement(O.a,{open:!0,"aria-labelledby":"alert-dialog-title"},d.a.createElement(T.a,{id:"alert-dialog-title"},"Do you really want to delete this post?"),d.a.createElement(C.a,null,d.a.createElement(S.a,{onClick:function(){return t.setState({deleteDialogOpen:!1})},disabled:this.state.deleting,color:"primary"},"Disagree"),d.a.createElement("div",{className:a.buttonSpinnerWrapper},d.a.createElement(S.a,{onClick:this.processDelete,disabled:this.state.deleting,autoFocus:!0},"Agree"),this.state.deleting&&d.a.createElement(j.a,{size:24,className:a.buttonProgress,color:"secondary"})))))}},{key:"render",value:function(){var e,t=this,a=this.props.classes,i=this.props.getArticleFromId(this.articleId);e=void 0===i?d.a.createElement(y.a,{variant:"h4",className:a.headline},"Nothing here ..."):this.getArticleForm(i);var n=void 0===this.state.headline?i.headline:this.state.headline;0===n.length&&(n="No Title");var s=void 0===this.state.selectedImageIds?i.selected_image_ids:this.state.selectedImageIds,r=void 0===this.state.favoriteImageId?i.favorite_image_id:this.state.favoriteImageId;return d.a.createElement("div",{className:"AdminNewsFeedPage"},d.a.createElement(m.b,{to:"/admin/news-feed",onClick:function(){k.animateScroll.scrollToTop({duration:300}),t.props.triggerReload()}},d.a.createElement(R.a,{className:a.backIcon,color:"secondary"})),d.a.createElement(y.a,{variant:"h4",className:a.headline},n),d.a.createElement(E.a,{className:a.divider}),e,d.a.createElement(E.a,{className:a.divider}),d.a.createElement(q,{api:this.props.api,selectedImageIds:s,favoriteImageId:r,updateFavoriteImageId:function(e){return t.setState({favoriteImageId:e})},updateSelectedImageIds:function(e){return t.setState({selectedImageIds:e})}}))}}]),t}(d.a.Component),Q=M()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{paddingLeft:e.spacing(5),paddingRight:e.spacing(5),display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2),minWidth:250},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},visibilityBox:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(1),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},authorInput:{width:250,marginLeft:e.spacing(2)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},uploadButtonWrapper:{marginTop:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"}}}))(Object(p.h)(G)),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).state={uploading:!1,headline:"",content:"",timestamp:Math.round(Date.now()/1e3),visible:0,author:a.props.api.name},a.headlineInputRef=d.a.createRef(),a.contentInputRef=d.a.createRef(),a.authorInputRef=d.a.createRef(),a.processUpload=a.processUpload.bind(Object(l.a)(a)),a.getArticleForm=a.getArticleForm.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"processUpload",value:function(){var e=this;console.log("Saving Article"),this.setState({uploading:!0});var t={email:this.props.api.email,api_key:this.props.api.api_key,article_headline:this.state.headline,article_content:this.state.content,article_timestamp:this.state.timestamp,article_visible:this.state.visible,article_author:this.state.author};Object(g.c)(h.a+"/backend/database/article",t,"POST").then((function(t){var a=JSON.parse(t);console.log("Saving article: Status = "+a.Status),"Ok"===a.Status?window.open("/admin/news-feed/"+a.new_article_id,"_self"):e.setState({uploading:!1})})).catch((function(){console.log("Saving article: failed"),e.setState({uploading:!1})}))}},{key:"getArticleForm",value:function(){var e=this,t=this.props.classes,a=d.a.createElement(I.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},d.a.createElement(I.a,{item:!0,xs:12,className:t.gridItem},d.a.createElement(D.a,{fullWidth:!0,label:"Headline",className:t.headlineInput,value:this.state.headline,ref:this.headlineInputRef,onChange:function(t){return e.setState({headline:t})},onEnter:function(){return e.contentInputRef.current.focus()},onTab:function(){return e.contentInputRef.current.focus()},onEscape:function(){return e.headlineInputRef.current.blur()}})),d.a.createElement(I.a,{item:!0,xs:12,className:t.gridItem},d.a.createElement(D.a,{fullWidth:!0,label:"Content",multiline:!0,rowsMax:"12",className:t.contentInput,value:this.state.content,ref:this.contentInputRef,onChange:function(t){return e.setState({content:t})},onTab:function(){return null},onEscape:function(){return e.contentInputRef.current.blur()}})),d.a.createElement(I.a,{item:!0,className:t.gridItem},d.a.createElement(W.a,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.datepicker})),d.a.createElement(I.a,{item:!0,className:t.gridItem},d.a.createElement(P.a,{timestamp:this.state.timestamp,updateTimestamp:function(t){return e.setState({timestamp:t})},className:t.timepicker})),d.a.createElement(I.a,{item:!0,className:Object(x.a)(t.gridItem,t.visibilityBox)},d.a.createElement("div",{className:t.visibilityBox},1===this.state.visible&&d.a.createElement(F.a,{onClick:function(){return e.setState({visible:0})},className:t.visibilityIcon}),0===this.state.visible&&d.a.createElement(A.a,{onClick:function(){return e.setState({visible:1})},className:t.visibilityIcon}),d.a.createElement(y.a,{className:t.visibilityText,variant:"body1"},this.state.visible?"Currently Visible":"Currently Invisible"))),d.a.createElement(I.a,{item:!0,className:t.gridItem},d.a.createElement(D.a,{fullWidth:!1,label:"Author",className:t.authorInput,value:this.state.author,ref:this.authorInputRef,onChange:function(t){return e.setState({author:t})},onEnter:function(){return e.authorInputRef.current.blur()},onTab:function(){return e.authorInputRef.current.blur()},onEscape:function(){return e.authorInputRef.current.blur()}})));return d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{elevation:3,className:t.card},d.a.createElement(b.a,{className:t.cardContent},a)),d.a.createElement("div",{className:t.uploadButtonWrapper},d.a.createElement("div",{className:t.buttonSpinnerWrapper},d.a.createElement(S.a,{variant:"contained",color:this.state.uploading?"default":"secondary",onClick:this.processUpload,className:t.button},"Save Post"),this.state.uploading&&d.a.createElement(j.a,{size:24,className:t.buttonProgress,color:"secondary"}))))}},{key:"render",value:function(){var e=this.props.classes;return d.a.createElement("div",{className:"AdminNewsFeedPage"},d.a.createElement(m.b,{to:"/admin/news-feed",onClick:function(){return k.animateScroll.scrollToTop({duration:300})}},d.a.createElement(R.a,{className:e.backIcon,color:"secondary"})),d.a.createElement(y.a,{variant:"h4",className:e.headline},"New Post"),d.a.createElement(E.a,{className:e.divider}),this.getArticleForm())}}]),t}(d.a.Component),Y=M()((function(e){return{backIcon:{position:"absolute",top:e.spacing(1),left:e.spacing(1)},headline:{paddingLeft:e.spacing(5),paddingRight:e.spacing(5),display:"block",textAlign:"center",marginBottom:e.spacing(4)},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(4)},card:{position:"relative",width:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0),margin:0,"&:last-child":{paddingTop:e.spacing(2),paddingRight:e.spacing(0),paddingBottom:e.spacing(2),paddingLeft:e.spacing(0)},display:"flex",position:"relative"},hiddenInput:{display:"none"},selectButton:{color:e.palette.primary.main},gridItem:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",marginLeft:e.spacing(2),marginRight:e.spacing(2),minWidth:250},formControl:{minWidth:250,marginTop:e.spacing(1)},datepicker:{minWidth:250},timepicker:{minWidth:250},descriptionInput:{marginTop:e.spacing(1)},visibilityBox:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",marginTop:e.spacing(2)},visibilityIcon:{marginRight:e.spacing(1),cursor:"pointer",alignSelf:"flex-start"},visibilityText:{alignSelf:"flex-start"},authorInput:{width:250,marginLeft:e.spacing(2)},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginTop:e.spacing(3),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},uploadButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}}))(X),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).state={loading:!0,articles:[],articleIdtoIndex:{}},a.triggerReload=a.triggerReload.bind(Object(l.a)(a)),a.getArticleList=a.getArticleList.bind(Object(l.a)(a)),a.getArticleFromId=a.getArticleFromId.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.triggerReload()}},{key:"triggerReload",value:function(){var e=this;this.setState({loading:!0}),console.log("Fetching article data");var t={email:this.props.api.email,api_key:this.props.api.api_key};Object(g.a)(h.a+"/backend/database/article",t).then((function(t){console.log("Fetching article data: successful"),e.setState({loading:!1,articles:JSON.parse(t).articles,articleIdtoIndex:JSON.parse(t).article_id_to_index})})).catch((function(){console.log("Fetching article data: failed"),e.setState({loading:!1})}))}},{key:"getArticleList",value:function(){var e=this.props.classes,t=this.state.articles.map((function(t,a){var i;return i=0===t.images.length?"https://wallpaperaccess.com/full/25637.jpg":t.images[0].filepath_medium,d.a.createElement(I.a,{item:!0,xs:12,key:a},d.a.createElement(m.b,{to:"/admin/news-feed/"+t.id},d.a.createElement(u.Breakpoint,{small:!0,down:!0},d.a.createElement(f.a,{elevation:3},d.a.createElement(v.a,{className:e.cardImageTop,image:i}),d.a.createElement("div",{className:e.cardContentBottom},d.a.createElement("div",{className:e.cardContentOverlay}),d.a.createElement(b.a,{className:e.cardContent},d.a.createElement(y.a,{component:"h5",variant:"h5"},t.headline),d.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain))))),d.a.createElement(u.Breakpoint,{medium:!0,up:!0},d.a.createElement(f.a,{className:e.card,elevation:3},d.a.createElement(v.a,{className:e.cardImageLeft,image:i}),d.a.createElement("div",{className:e.cardContentRight},d.a.createElement("div",{className:e.cardContentOverlay}),d.a.createElement(b.a,{className:e.cardContent},d.a.createElement(y.a,{component:"h5",variant:"h5"},t.headline),d.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"},t.content_plain)))))))}));return d.a.createElement(I.a,{container:!0,spacing:2},t)}},{key:"getArticleFromId",value:function(e){return this.state.articles[this.state.articleIdtoIndex[e]]}},{key:"render",value:function(){var e=this.props.classes;return d.a.createElement(p.d,null,d.a.createElement(p.b,{exact:!0,path:"/admin/news-feed"},d.a.createElement("div",{className:"NewsFeedPage"},d.a.createElement(y.a,{variant:"h4",className:e.headline},"News Feed"),this.state.loading&&d.a.createElement(N.a,{className:e.linearProgress,color:"secondary"}),!this.state.loading&&d.a.createElement("div",{className:e.root},d.a.createElement("div",{className:e.buttonRow},d.a.createElement("div",{className:e.buttonSpinnerWrapper},d.a.createElement(m.b,{to:"/admin/news-feed/new"},d.a.createElement(S.a,{variant:"contained",color:"secondary",className:e.button},"Add Post")))),d.a.createElement(E.a,{className:e.divider}),this.getArticleList()))),d.a.createElement(p.b,{exact:!0,path:"/admin/news-feed/new"},this.state.loading&&d.a.createElement(d.a.Fragment,null,d.a.createElement(y.a,{variant:"h4",className:e.headline},"News Feed"),d.a.createElement(N.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&d.a.createElement(Y,{api:this.props.api})),d.a.createElement(p.b,{path:"/admin/news-feed/:articleId"},this.state.loading&&d.a.createElement(d.a.Fragment,null,d.a.createElement(y.a,{variant:"h4",className:e.headline},"News Feed"),d.a.createElement(N.a,{className:e.linearProgress,color:"secondary"})),!this.state.loading&&d.a.createElement(Q,{api:this.props.api,getArticleFromId:this.getArticleFromId,triggerReload:this.triggerReload})))}}]),t}(d.a.Component);t.default=M()((function(e){return{headline:{display:"block",textAlign:"center",marginBottom:e.spacing(4)},linearProgress:{borderRadius:"2px"},buttonRow:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},buttonSpinnerWrapper:{position:"relative",display:"inline-flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},button:{color:"white",position:"relative",display:"inline-flex"},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},card:{display:"flex",cursor:"pointer"},cardContentRight:{position:"relative",height:e.spacing(16),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"calc(100% - ".concat(e.spacing(32),"px)")},cardContentBottom:{position:"relative",maxHeight:e.spacing(18),marginBottom:e.spacing(2),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"no-wrap",maxWidth:"100%"},cardContent:{paddingTop:e.spacing(2),paddingRight:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),margin:0,"&:last-child":{paddingBottom:e.spacing(2)}},cardContentOverlay:{position:"absolute",left:0,bottom:"-1px",width:"100%",height:e.spacing(4),background:"linear-gradient(0deg, rgba(255,255,255,1.0), rgba(255,255,255,0.0))"},cardImageLeft:{height:e.spacing(18),width:e.spacing(32)},cardImageTop:{height:0,paddingTop:"56.25%"}}}))(Z)}}]);
//# sourceMappingURL=12.4854f567.chunk.js.map